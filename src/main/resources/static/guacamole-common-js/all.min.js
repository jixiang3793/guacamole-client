var Guacamole=Guacamole||{};Guacamole.ArrayBufferReader=function(b){var a=this;b.onblob=function(f){var g=window.atob(f);var d=new ArrayBuffer(g.length);var e=new Uint8Array(d);for(var c=0;c<g.length;c++){e[c]=g.charCodeAt(c)}if(a.ondata){a.ondata(d)}};b.onend=function(){if(a.onend){a.onend()}};this.ondata=null;this.onend=null};var Guacamole=Guacamole||{};Guacamole.ArrayBufferWriter=function(c){var b=this;c.onack=function(d){if(b.onack){b.onack(d)}};function a(d){var f="";for(var e=0;e<d.byteLength;e++){f+=String.fromCharCode(d[e])}c.sendBlob(window.btoa(f))}this.blobLength=Guacamole.ArrayBufferWriter.DEFAULT_BLOB_LENGTH;this.sendData=function(e){var d=new Uint8Array(e);if(d.length<=b.blobLength){a(d)}else{for(var f=0;f<d.length;f+=b.blobLength){a(d.subarray(f,f+b.blobLength))}}};this.sendEnd=function(){c.sendEnd()};this.onack=null};Guacamole.ArrayBufferWriter.DEFAULT_BLOB_LENGTH=6048;var Guacamole=Guacamole||{};Guacamole.AudioContextFactory={singleton:null,getAudioContext:function getAudioContext(){var b=window.AudioContext||window.webkitAudioContext;if(b){try{if(!Guacamole.AudioContextFactory.singleton){Guacamole.AudioContextFactory.singleton=new b()}return Guacamole.AudioContextFactory.singleton}catch(a){}}return null}};var Guacamole=Guacamole||{};Guacamole.AudioPlayer=function AudioPlayer(){this.sync=function a(){}};Guacamole.AudioPlayer.isSupportedType=function isSupportedType(a){return Guacamole.RawAudioPlayer.isSupportedType(a)};Guacamole.AudioPlayer.getSupportedTypes=function getSupportedTypes(){return Guacamole.RawAudioPlayer.getSupportedTypes()};Guacamole.AudioPlayer.getInstance=function getInstance(b,a){if(Guacamole.RawAudioPlayer.isSupportedType(a)){return new Guacamole.RawAudioPlayer(b,a)}return null};Guacamole.RawAudioPlayer=function RawAudioPlayer(e,a){var n=Guacamole.RawAudioFormat.parse(a);var d=Guacamole.AudioContextFactory.getAudioContext();var m=d.currentTime;var b=new Guacamole.ArrayBufferReader(e);var o=0.02;var j=0.3;var k=(n.bytesPerSample===1)?window.Int8Array:window.Int16Array;var i=(n.bytesPerSample===1)?128:32768;var g=[];var f=function f(v){if(v.length<=1){return v[0]}var x=0;v.forEach(function s(y){x+=y.length});var w=0;var t=new k(x);v.forEach(function u(y){t.set(y,w);w+=y.length});return t};var q=function q(v){var z=Number.MAX_VALUE;var x=v.length;var y=Math.floor(v.length/n.channels);var A=Math.floor(n.rate*o);var s=Math.max(n.channels*A,n.channels*(y-A));for(var u=s;u<v.length;u+=n.channels){var t=0;for(var w=0;w<n.channels;w++){t+=Math.abs(v[u+w])}if(t<=z){x=u+n.channels;z=t}}if(x===v.length){return[v]}return[new k(v.buffer.slice(0,x*n.bytesPerSample)),new k(v.buffer.slice(x*n.bytesPerSample))]};var c=function c(s){g.push(new k(s))};var r=function r(){var s=f(g);if(!s){return null}g=q(s);s=g.shift();return s};var p=function p(y){var u=y.length/n.channels;var s=d.currentTime;if(m<s){m=s}var x=d.createBuffer(n.channels,u,n.rate);for(var w=0;w<n.channels;w++){var t=x.getChannelData(w);var z=w;for(var v=0;v<u;v++){t[v]=y[z]/i;z+=n.channels}}return x};b.ondata=function l(u){c(new k(u));var v=r();if(!v){return}var s=d.currentTime;if(m<s){m=s}var t=d.createBufferSource();t.connect(d.destination);if(!t.start){t.start=t.noteOn}t.buffer=p(v);t.start(m);m+=v.length/n.channels/n.rate};this.sync=function h(){var s=d.currentTime;m=Math.min(m,s+j)}};Guacamole.RawAudioPlayer.prototype=new Guacamole.AudioPlayer();Guacamole.RawAudioPlayer.isSupportedType=function isSupportedType(a){if(!Guacamole.AudioContextFactory.getAudioContext()){return false}return Guacamole.RawAudioFormat.parse(a)!==null};Guacamole.RawAudioPlayer.getSupportedTypes=function getSupportedTypes(){if(!Guacamole.AudioContextFactory.getAudioContext()){return[]}return["audio/L8","audio/L16"]};var Guacamole=Guacamole||{};Guacamole.AudioRecorder=function AudioRecorder(){this.onclose=null;this.onerror=null};Guacamole.AudioRecorder.isSupportedType=function isSupportedType(a){return Guacamole.RawAudioRecorder.isSupportedType(a)};Guacamole.AudioRecorder.getSupportedTypes=function getSupportedTypes(){return Guacamole.RawAudioRecorder.getSupportedTypes()};Guacamole.AudioRecorder.getInstance=function getInstance(b,a){if(Guacamole.RawAudioRecorder.isSupportedType(a)){return new Guacamole.RawAudioRecorder(b,a)}return null};Guacamole.RawAudioRecorder=function RawAudioRecorder(g,a){var f=this;var y=2048;var j=3;var v=Guacamole.RawAudioFormat.parse(a);var c=Guacamole.AudioContextFactory.getAudioContext();if(!navigator.mediaDevices){navigator.mediaDevices={}}if(!navigator.mediaDevices.getUserMedia){navigator.mediaDevices.getUserMedia=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia).bind(navigator)}var u=new Guacamole.ArrayBufferWriter(g);var s=(v.bytesPerSample===1)?window.Int8Array:window.Int16Array;var n=(v.bytesPerSample===1)?128:32768;var x=0;var w=0;var t=null;var r=null;var d=null;var q=function q(z){if(z===0){return 1}var A=Math.PI*z;return Math.sin(A)/A};var k=function k(z,A){if(-A<z&&z<A){return q(z)*q(z/A)}return 0};var p=function o(B,D){var A=(B.length-1)*D;var F=Math.floor(A)-j+1;var z=Math.floor(A)+j;var E=0;for(var C=F;C<=z;C++){E+=(B[C]||0)*k(A-C,j)}return E};var h=function h(F){var z=F.length;x+=z;var G=Math.round(x*v.rate/F.sampleRate);var H=G-w;w+=H;var C=new s(H*v.channels);for(var D=0;D<v.channels;D++){var E=F.getChannelData(D);var A=D;for(var B=0;B<H;B++){C[A]=p(E,B/(H-1))*n;A+=v.channels}}return C};var m=function m(A){d=c.createScriptProcessor(y,v.channels,v.channels);d.connect(c.destination);d.onaudioprocess=function z(B){u.sendData(h(B.inputBuffer).buffer)};r=c.createMediaStreamSource(A);r.connect(d);if(c.state==="suspended"){c.resume()}t=A};var e=function e(){u.sendEnd();if(f.onerror){f.onerror()}};var i=function i(){var z=navigator.mediaDevices.getUserMedia({audio:true},m,e);if(z&&z.then){z.then(m,e)}};var l=function l(){if(r){r.disconnect()}if(d){d.disconnect()}if(t){var z=t.getTracks();for(var A=0;A<z.length;A++){z[A].stop()}}d=null;r=null;t=null;u.sendEnd()};u.onack=function b(z){if(z.code===Guacamole.Status.Code.SUCCESS&&!t){i()}else{l();u.onack=null;if(z.code===Guacamole.Status.Code.RESOURCE_CLOSED){if(f.onclose){f.onclose()}}else{if(f.onerror){f.onerror()}}}}};Guacamole.RawAudioRecorder.prototype=new Guacamole.AudioRecorder();Guacamole.RawAudioRecorder.isSupportedType=function isSupportedType(a){if(!Guacamole.AudioContextFactory.getAudioContext()){return false}return Guacamole.RawAudioFormat.parse(a)!==null};Guacamole.RawAudioRecorder.getSupportedTypes=function getSupportedTypes(){if(!Guacamole.AudioContextFactory.getAudioContext()){return[]}return["audio/L8","audio/L16"]};var Guacamole=Guacamole||{};Guacamole.BlobReader=function(e,a){var d=this;var c=0;var b;if(window.BlobBuilder){b=new BlobBuilder()}else{if(window.WebKitBlobBuilder){b=new WebKitBlobBuilder()}else{if(window.MozBlobBuilder){b=new MozBlobBuilder()}else{b=new (function(){var f=[];this.append=function(g){f.push(new Blob([g],{type:a}))};this.getBlob=function(){return new Blob(f,{type:a})}})()}}}e.onblob=function(j){var k=window.atob(j);var g=new ArrayBuffer(k.length);var h=new Uint8Array(g);for(var f=0;f<k.length;f++){h[f]=k.charCodeAt(f)}b.append(g);c+=g.byteLength;if(d.onprogress){d.onprogress(g.byteLength)}e.sendAck("OK",0)};e.onend=function(){if(d.onend){d.onend()}};this.getLength=function(){return c};this.getBlob=function(){return b.getBlob()};this.onprogress=null;this.onend=null};var Guacamole=Guacamole||{};Guacamole.BlobWriter=function BlobWriter(d){var f=this;var a=new Guacamole.ArrayBufferWriter(d);a.onack=function(g){if(f.onack){f.onack(g)}};var c=function c(h,l,g){var i=(h.slice||h.webkitSlice||h.mozSlice).bind(h);var j=g-l;if(j!==g){var k=i(l,j);if(k.size===j){return k}}return i(l,g)};this.sendBlob=function b(i){var l=0;var g=new FileReader();var k=function k(){if(l>=i.size){if(f.oncomplete){f.oncomplete(i)}return}var m=c(i,l,l+a.blobLength);l+=a.blobLength;g.readAsArrayBuffer(m)};g.onload=function h(){a.sendData(g.result);a.onack=function m(n){if(f.onack){f.onack(n)}if(n.isError()){return}if(f.onprogress){f.onprogress(i,l-a.blobLength)}k()}};g.onerror=function j(){if(f.onerror){f.onerror(i,l,g.error)}};k()};this.sendEnd=function e(){a.sendEnd()};this.onack=null;this.onerror=null;this.onprogress=null;this.oncomplete=null};var Guacamole=Guacamole||{};Guacamole.Client=function(h){var r=this;var w=0;var c=1;var B=2;var y=3;var n=4;var L=5;var t=w;var G=0;var u=null;var j={0:"butt",1:"round",2:"square"};var M={0:"bevel",1:"miter",2:"round"};var v=new Guacamole.Display();var D={};var x={};var H={};var k=[];var s=[];var E=[];var I=new Guacamole.IntegerPool();var N=[];function J(P){if(P!=t){t=P;if(r.onstatechange){r.onstatechange(t)}}}function z(){return t==y||t==B}this.exportState=function p(T){var R={currentState:t,currentTimestamp:G,layers:{}};var P={};for(var Q in D){P[Q]=D[Q]}v.flush(function S(){for(var X in P){var V=parseInt(X);var W=P[X];var U=W.toCanvas();var Y={width:W.width,height:W.height};if(W.width&&W.height){Y.url=U.toDataURL("image/png")}if(V>0){Y.x=W.x;Y.y=W.y;Y.z=W.z;Y.alpha=W.alpha;Y.matrix=W.matrix;Y.parent=m(W.parent)}R.layers[X]=Y}T(R)})};this.importState=function F(U,W){var S;var Q;t=U.currentState;G=U.currentTimestamp;for(S in D){Q=parseInt(S);if(Q>0){v.dispose(D[S])}}D={};for(S in U.layers){Q=parseInt(S);var V=U.layers[S];var R=b(Q);v.resize(R,V.width,V.height);if(V.url){v.setChannelMask(R,Guacamole.Layer.SRC);v.draw(R,0,0,V.url)}if(Q>0&&V.parent>=0){var T=b(V.parent);v.move(R,T,V.x,V.y,V.z);v.shade(R,V.alpha);var P=V.matrix;v.distort(R,P[0],P[1],P[2],P[3],P[4],P[5])}}v.flush(W)};this.getDisplay=function(){return v};this.sendSize=function(Q,P){if(!z()){return}h.sendMessage("size",Q,P)};this.sendKeyEvent=function(P,Q){if(!z()){return}h.sendMessage("key",Q,P)};this.sendMouseState=function(Q){if(!z()){return}v.moveCursor(Math.floor(Q.x),Math.floor(Q.y));var P=0;if(Q.left){P|=1}if(Q.middle){P|=2}if(Q.right){P|=4}if(Q.up){P|=8}if(Q.down){P|=16}h.sendMessage("mouse",Math.floor(Q.x),Math.floor(Q.y),P)};this.createOutputStream=function l(){var P=I.next();var Q=N[P]=new Guacamole.OutputStream(r,P);return Q};this.createAudioStream=function(P){var Q=r.createOutputStream();h.sendMessage("audio",Q.index,P);return Q};this.createFileStream=function(P,Q){var R=r.createOutputStream();h.sendMessage("file",R.index,P,Q);return R};this.createPipeStream=function(P,Q){var R=r.createOutputStream();h.sendMessage("pipe",R.index,P,Q);return R};this.createClipboardStream=function(P){var Q=r.createOutputStream();h.sendMessage("clipboard",Q.index,P);return Q};this.createArgumentValueStream=function A(P,Q){var R=r.createOutputStream();h.sendMessage("argv",R.index,P,Q);return R};this.createObjectOutputStream=function q(R,P,Q){var S=r.createOutputStream();h.sendMessage("put",R,S.index,P,Q);return S};this.requestObjectInputStream=function d(Q,P){if(!z()){return}h.sendMessage("get",Q,P)};this.sendAck=function(P,R,Q){if(!z()){return}h.sendMessage("ack",P,R,Q)};this.sendBlob=function(P,Q){if(!z()){return}h.sendMessage("blob",P,Q)};this.endStream=function(P){if(!z()){return}h.sendMessage("end",P);if(N[P]){I.free(P);delete N[P]}};this.onstatechange=null;this.onname=null;this.onerror=null;this.onaudio=null;this.onvideo=null;this.onargv=null;this.onclipboard=null;this.onfile=null;this.onfilesystem=null;this.onpipe=null;this.onrequired=null;this.onsync=null;var b=function b(P){var Q=D[P];if(!Q){if(P===0){Q=v.getDefaultLayer()}else{if(P>0){Q=v.createLayer()}else{Q=v.createBuffer()}}D[P]=Q}return Q};var m=function m(Q){if(!Q){return null}for(var P in D){if(Q===D[P]){return parseInt(P)}}return null};function g(P){var Q=k[P];if(Q==null){Q=k[P]=new Guacamole.Parser();Q.oninstruction=h.oninstruction}return Q}var a={"miter-limit":function(P,Q){v.setMiterLimit(P,parseFloat(Q))}};var f={ack:function(Q){var T=parseInt(Q[0]);var R=Q[1];var P=parseInt(Q[2]);var S=N[T];if(S){if(S.onack){S.onack(new Guacamole.Status(P,R))}if(P>=256&&N[T]===S){I.free(T);delete N[T]}}},arc:function(V){var U=b(parseInt(V[0]));var Q=parseInt(V[1]);var W=parseInt(V[2]);var P=parseInt(V[3]);var T=parseFloat(V[4]);var R=parseFloat(V[5]);var S=parseInt(V[6]);v.arc(U,Q,W,P,T,R,S!=0)},argv:function(R){var T=parseInt(R[0]);var P=R[1];var Q=R[2];if(r.onargv){var S=s[T]=new Guacamole.InputStream(r,T);r.onargv(S,P,Q)}else{r.sendAck(T,"Receiving argument values unsupported",256)}},audio:function(R){var T=parseInt(R[0]);var Q=R[1];var S=s[T]=new Guacamole.InputStream(r,T);var P=null;if(r.onaudio){P=r.onaudio(S,Q)}if(!P){P=Guacamole.AudioPlayer.getInstance(S,Q)}if(P){x[T]=P;r.sendAck(T,"OK",0)}else{r.sendAck(T,"BAD TYPE",783)}},blob:function(P){var S=parseInt(P[0]);var Q=P[1];var R=s[S];if(R&&R.onblob){R.onblob(Q)}},body:function i(S){var T=parseInt(S[0]);var R=E[T];var V=parseInt(S[1]);var P=S[2];var Q=S[3];if(R&&R.onbody){var U=s[V]=new Guacamole.InputStream(r,V);R.onbody(U,P,Q)}else{r.sendAck(V,"Receipt of body unsupported",256)}},cfill:function(U){var V=parseInt(U[0]);var R=b(parseInt(U[1]));var T=parseInt(U[2]);var S=parseInt(U[3]);var P=parseInt(U[4]);var Q=parseInt(U[5]);v.setChannelMask(R,V);v.fillColor(R,T,S,P,Q)},clip:function(Q){var P=b(parseInt(Q[0]));v.clip(P)},clipboard:function(Q){var S=parseInt(Q[0]);var P=Q[1];if(r.onclipboard){var R=s[S]=new Guacamole.InputStream(r,S);r.onclipboard(R,P)}else{r.sendAck(S,"Clipboard unsupported",256)}},close:function(Q){var P=b(parseInt(Q[0]));v.close(P)},copy:function(X){var P=b(parseInt(X[0]));var T=parseInt(X[1]);var S=parseInt(X[2]);var R=parseInt(X[3]);var Y=parseInt(X[4]);var W=parseInt(X[5]);var Q=b(parseInt(X[6]));var V=parseInt(X[7]);var U=parseInt(X[8]);v.setChannelMask(Q,W);v.copy(P,T,S,R,Y,Q,V,U)},cstroke:function(X){var U=parseInt(X[0]);var S=b(parseInt(X[1]));var Y=j[parseInt(X[2])];var Q=M[parseInt(X[3])];var W=parseInt(X[4]);var P=parseInt(X[5]);var R=parseInt(X[6]);var T=parseInt(X[7]);var V=parseInt(X[8]);v.setChannelMask(S,U);v.strokeColor(S,Y,Q,W,P,R,T,V)},cursor:function(W){var V=parseInt(W[0]);var U=parseInt(W[1]);var S=b(parseInt(W[2]));var Q=parseInt(W[3]);var P=parseInt(W[4]);var T=parseInt(W[5]);var R=parseInt(W[6]);v.setCursor(V,U,S,Q,P,T,R)},curve:function(V){var U=b(parseInt(V[0]));var R=parseInt(V[1]);var Q=parseInt(V[2]);var T=parseInt(V[3]);var S=parseInt(V[4]);var P=parseInt(V[5]);var W=parseInt(V[6]);v.curveTo(U,R,Q,T,S,P,W)},disconnect:function e(P){r.disconnect()},dispose:function(R){var P=parseInt(R[0]);if(P>0){var Q=b(P);v.dispose(Q);delete D[P]}else{if(P<0){delete D[P]}}},distort:function(X){var P=parseInt(X[0]);var W=parseFloat(X[1]);var V=parseFloat(X[2]);var U=parseFloat(X[3]);var T=parseFloat(X[4]);var S=parseFloat(X[5]);var R=parseFloat(X[6]);if(P>=0){var Q=b(P);v.distort(Q,W,V,U,T,S,R)}},error:function(Q){var R=Q[0];var P=parseInt(Q[1]);if(r.onerror){r.onerror(new Guacamole.Status(P,R))}r.disconnect()},end:function(P){var R=parseInt(P[0]);var Q=s[R];if(Q){if(Q.onend){Q.onend()}delete s[R]}},file:function(R){var T=parseInt(R[0]);var P=R[1];var Q=R[2];if(r.onfile){var S=s[T]=new Guacamole.InputStream(r,T);r.onfile(S,P,Q)}else{r.sendAck(T,"File transfer unsupported",256)}},filesystem:function C(R){var S=parseInt(R[0]);var Q=R[1];if(r.onfilesystem){var P=E[S]=new Guacamole.Object(r,S);r.onfilesystem(P,Q)}},identity:function(Q){var P=b(parseInt(Q[0]));v.setTransform(P,1,0,0,1,0,0)},img:function(S){var U=parseInt(S[0]);var W=parseInt(S[1]);var R=b(parseInt(S[2]));var Q=S[3];var P=parseInt(S[4]);var V=parseInt(S[5]);var T=s[U]=new Guacamole.InputStream(r,U);v.setChannelMask(R,W);v.drawStream(R,P,V,T,Q)},jpeg:function(R){var U=parseInt(R[0]);var Q=b(parseInt(R[1]));var P=parseInt(R[2]);var T=parseInt(R[3]);var S=R[4];v.setChannelMask(Q,U);v.draw(Q,P,T,"data:image/jpeg;base64,"+S)},lfill:function(R){var S=parseInt(R[0]);var Q=b(parseInt(R[1]));var P=b(parseInt(R[2]));v.setChannelMask(Q,S);v.fillLayer(Q,P)},line:function(R){var Q=b(parseInt(R[0]));var P=parseInt(R[1]);var S=parseInt(R[2]);v.lineTo(Q,P,S)},lstroke:function(R){var S=parseInt(R[0]);var Q=b(parseInt(R[1]));var P=b(parseInt(R[2]));v.setChannelMask(Q,S);v.strokeLayer(Q,P)},mouse:function O(Q){var P=parseInt(Q[0]);var R=parseInt(Q[1]);v.showCursor(true);v.moveCursor(P,R)},move:function(U){var Q=parseInt(U[0]);var R=parseInt(U[1]);var P=parseInt(U[2]);var W=parseInt(U[3]);var V=parseInt(U[4]);if(Q>0&&R>=0){var S=b(Q);var T=b(R);v.move(S,T,P,W,V)}},name:function(P){if(r.onname){r.onname(P[0])}},nest:function(P){var Q=g(parseInt(P[0]));Q.receive(P[1])},pipe:function(R){var T=parseInt(R[0]);var P=R[1];var Q=R[2];if(r.onpipe){var S=s[T]=new Guacamole.InputStream(r,T);r.onpipe(S,P,Q)}else{r.sendAck(T,"Named pipes unsupported",256)}},png:function(R){var U=parseInt(R[0]);var Q=b(parseInt(R[1]));var P=parseInt(R[2]);var T=parseInt(R[3]);var S=R[4];v.setChannelMask(Q,U);v.draw(Q,P,T,"data:image/png;base64,"+S)},pop:function(Q){var P=b(parseInt(Q[0]));v.pop(P)},push:function(Q){var P=b(parseInt(Q[0]));v.push(P)},rect:function(T){var R=b(parseInt(T[0]));var P=parseInt(T[1]);var U=parseInt(T[2]);var Q=parseInt(T[3]);var S=parseInt(T[4]);v.rect(R,P,U,Q,S)},required:function o(P){if(r.onrequired){r.onrequired(P)}},reset:function(Q){var P=b(parseInt(Q[0]));v.reset(P)},set:function(S){var Q=b(parseInt(S[0]));var P=S[1];var T=S[2];var R=a[P];if(R){R(Q,T)}},shade:function(S){var P=parseInt(S[0]);var Q=parseInt(S[1]);if(P>=0){var R=b(P);v.shade(R,Q)}},size:function(T){var Q=parseInt(T[0]);var R=b(Q);var S=parseInt(T[1]);var P=parseInt(T[2]);v.resize(R,S,P)},start:function(R){var Q=b(parseInt(R[0]));var P=parseInt(R[1]);var S=parseInt(R[2]);v.moveTo(Q,P,S)},sync:function(Q){var R=parseInt(Q[0]);v.flush(function P(){for(var T in x){var S=x[T];if(S){S.sync()}}if(R!==G){h.sendMessage("sync",R);G=R}});if(t===B){J(y)}if(r.onsync){r.onsync(R)}},transfer:function(X){var P=b(parseInt(X[0]));var U=parseInt(X[1]);var T=parseInt(X[2]);var S=parseInt(X[3]);var Y=parseInt(X[4]);var R=parseInt(X[5]);var Q=b(parseInt(X[6]));var W=parseInt(X[7]);var V=parseInt(X[8]);if(R===3){v.put(P,U,T,S,Y,Q,W,V)}else{if(R!==5){v.transfer(P,U,T,S,Y,Q,W,V,Guacamole.Client.DefaultTransferFunction[R])}}},transform:function(S){var R=b(parseInt(S[0]));var Q=parseFloat(S[1]);var P=parseFloat(S[2]);var W=parseFloat(S[3]);var V=parseFloat(S[4]);var U=parseFloat(S[5]);var T=parseFloat(S[6]);v.transform(R,Q,P,W,V,U,T)},undefine:function K(Q){var R=parseInt(Q[0]);var P=E[R];if(P&&P.onundefine){P.onundefine()}},video:function(S){var U=parseInt(S[0]);var Q=b(parseInt(S[1]));var P=S[2];var T=s[U]=new Guacamole.InputStream(r,U);var R=null;if(r.onvideo){R=r.onvideo(T,Q,P)}if(!R){R=Guacamole.VideoPlayer.getInstance(T,Q,P)}if(R){H[U]=R;r.sendAck(U,"OK",0)}else{r.sendAck(U,"BAD TYPE",783)}}};h.oninstruction=function(R,Q){var P=f[R];if(P){P(Q)}};this.disconnect=function(){if(t!=L&&t!=n){J(n);if(u){window.clearInterval(u)}h.sendMessage("disconnect");h.disconnect();J(L)}};this.connect=function(Q){J(c);try{h.connect(Q)}catch(P){J(w);throw P}u=window.setInterval(function(){h.sendMessage("nop")},5000);J(B)}};Guacamole.Client.DefaultTransferFunction={0:function(a,b){b.red=b.green=b.blue=0},15:function(a,b){b.red=b.green=b.blue=255},3:function(a,b){b.red=a.red;b.green=a.green;b.blue=a.blue;b.alpha=a.alpha},5:function(a,b){},12:function(a,b){b.red=255&~a.red;b.green=255&~a.green;b.blue=255&~a.blue;b.alpha=a.alpha},10:function(a,b){b.red=255&~b.red;b.green=255&~b.green;b.blue=255&~b.blue},1:function(a,b){b.red=(a.red&b.red);b.green=(a.green&b.green);b.blue=(a.blue&b.blue)},14:function(a,b){b.red=255&~(a.red&b.red);b.green=255&~(a.green&b.green);b.blue=255&~(a.blue&b.blue)},7:function(a,b){b.red=(a.red|b.red);b.green=(a.green|b.green);b.blue=(a.blue|b.blue)},8:function(a,b){b.red=255&~(a.red|b.red);b.green=255&~(a.green|b.green);b.blue=255&~(a.blue|b.blue)},6:function(a,b){b.red=(a.red^b.red);b.green=(a.green^b.green);b.blue=(a.blue^b.blue)},9:function(a,b){b.red=255&~(a.red^b.red);b.green=255&~(a.green^b.green);b.blue=255&~(a.blue^b.blue)},4:function(a,b){b.red=255&(~a.red&b.red);b.green=255&(~a.green&b.green);b.blue=255&(~a.blue&b.blue)},13:function(a,b){b.red=255&(~a.red|b.red);b.green=255&(~a.green|b.green);b.blue=255&(~a.blue|b.blue)},2:function(a,b){b.red=255&(a.red&~b.red);b.green=255&(a.green&~b.green);b.blue=255&(a.blue&~b.blue)},11:function(a,b){b.red=255&(a.red|~b.red);b.green=255&(a.green|~b.green);b.blue=255&(a.blue|~b.blue)}};var Guacamole=Guacamole||{};Guacamole.DataURIReader=function(g,b){var f=this;var e="data:"+b+";base64,";g.onblob=function a(h){e+=h};g.onend=function c(){if(f.onend){f.onend()}};this.getURI=function d(){return e};this.onend=null};var Guacamole=Guacamole||{};Guacamole.Display=function(){var b=this;var g=0;var d=0;var l=1;var n=document.createElement("div");n.style.position="relative";n.style.width=g+"px";n.style.height=d+"px";n.style.transformOrigin=n.style.webkitTransformOrigin=n.style.MozTransformOrigin=n.style.OTransformOrigin=n.style.msTransformOrigin="0 0";var f=new Guacamole.Display.VisibleLayer(g,d);var e=new Guacamole.Display.VisibleLayer(0,0);e.setChannelMask(Guacamole.Layer.SRC);n.appendChild(f.getElement());n.appendChild(e.getElement());var i=document.createElement("div");i.style.position="relative";i.style.width=(g*l)+"px";i.style.height=(d*l)+"px";i.appendChild(n);this.cursorHotspotX=0;this.cursorHotspotY=0;this.cursorX=0;this.cursorY=0;this.onresize=null;this.oncursor=null;var k=[];var j=[];function h(){var t=0;while(t<j.length){var u=j[t];if(!u.isReady()){break}u.flush();t++}j.splice(0,t)}function o(u,t){this.isReady=function(){for(var v=0;v<t.length;v++){if(t[v].blocked){return false}}return true};this.flush=function(){for(var v=0;v<t.length;v++){t[v].execute()}if(u){u()}}}function a(v,u){var t=this;this.blocked=u;this.unblock=function(){if(t.blocked){t.blocked=false;h()}};this.execute=function(){if(v){v()}}}function q(v,u){var t=new a(v,u);k.push(t);return t}this.getElement=function(){return i};this.getWidth=function(){return g};this.getHeight=function(){return d};this.getDefaultLayer=function(){return f};this.getCursorLayer=function(){return e};this.createLayer=function(){var t=new Guacamole.Display.VisibleLayer(g,d);t.move(f,0,0,0);return t};this.createBuffer=function(){var t=new Guacamole.Layer(0,0);t.autosize=1;return t};this.flush=function(t){j.push(new o(t,k));k=[];h()};this.setCursor=function(z,x,y,u,t,w,A){q(function v(){b.cursorHotspotX=z;b.cursorHotspotY=x;e.resize(w,A);e.copy(y,u,t,w,A,0,0);b.moveCursor(b.cursorX,b.cursorY);if(b.oncursor){b.oncursor(e.toCanvas(),z,x)}})};this.showCursor=function(v){var t=e.getElement();var u=t.parentNode;if(v===false){if(u){u.removeChild(t)}}else{if(u!==n){n.appendChild(t)}}};this.moveCursor=function(t,u){e.translate(t-b.cursorHotspotX,u-b.cursorHotspotY);b.cursorX=t;b.cursorY=u};this.resize=function(u,v,t){q(function w(){u.resize(v,t);if(u===f){g=v;d=t;n.style.width=g+"px";n.style.height=d+"px";i.style.width=(g*l)+"px";i.style.height=(d*l)+"px";if(b.onresize){b.onresize(v,t)}}})};this.drawImage=function(v,t,z,w){q(function u(){v.drawImage(t,z,w)})};this.drawBlob=function(A,D,B,t){var v;if(window.createImageBitmap){var C;v=q(function F(){A.drawImage(D,B,C)},true);window.createImageBitmap(t).then(function E(x){C=x;v.unblock()})}else{var u=URL.createObjectURL(t);v=q(function w(){if(z.width&&z.height){A.drawImage(D,B,z)}URL.revokeObjectURL(u)},true);var z=new Image();z.onload=v.unblock;z.onerror=v.unblock;z.src=u}};this.drawStream=function c(w,u,C,B,v){if(window.createImageBitmap){var t=new Guacamole.BlobReader(B,v);t.onend=function z(){b.drawBlob(w,u,C,t.getBlob())}}else{var t=new Guacamole.DataURIReader(B,v);t.onend=function A(){b.draw(w,u,C,t.getURI())}}};this.draw=function(z,t,B,w){var v=q(function u(){if(A.width&&A.height){z.drawImage(t,B,A)}},true);var A=new Image();A.onload=v.unblock;A.onerror=v.unblock;A.src=w};this.play=function(v,t,x,u){var w=document.createElement("video");w.type=t;w.src=u;w.addEventListener("play",function(){function y(){v.drawImage(0,0,w);if(!w.ended){window.setTimeout(y,20)}}y()},false);q(w.play)};this.transfer=function(B,u,t,v,E,z,C,A,w){q(function D(){z.transfer(B,u,t,v,E,C,A,w)})};this.put=function(B,u,t,v,D,z,C,A){q(function w(){z.put(B,u,t,v,D,C,A)})};this.copy=function(B,u,t,v,D,w,C,A){q(function z(){w.copy(B,u,t,v,D,C,A)})};this.moveTo=function(v,t,w){q(function u(){v.moveTo(t,w)})};this.lineTo=function(v,t,w){q(function u(){v.lineTo(t,w)})};this.arc=function(B,u,C,t,A,v,z){q(function w(){B.arc(u,C,t,A,v,z)})};this.curveTo=function(A,v,u,z,w,t,C){q(function B(){A.curveTo(v,u,z,w,t,C)})};this.close=function(t){q(function u(){t.close()})};this.rect=function(v,t,B,u,z){q(function A(){v.rect(t,B,u,z)})};this.clip=function(t){q(function u(){t.clip()})};this.strokeColor=function(w,A,u,y,t,v,x,z){q(function B(){w.strokeColor(A,u,y,t,v,x,z)})};this.fillColor=function(v,x,w,t,u){q(function y(){v.fillColor(x,w,t,u)})};this.strokeLayer=function(x,w,y,v,u){q(function t(){x.strokeLayer(w,y,v,u)})};this.fillLayer=function(u,t){q(function v(){u.fillLayer(t)})};this.push=function(u){q(function t(){u.push()})};this.pop=function(u){q(function t(){u.pop()})};this.reset=function(t){q(function u(){t.reset()})};this.setTransform=function(v,u,t,A,y,x,w){q(function z(){v.setTransform(u,t,A,y,x,w)})};this.transform=function(w,v,t,A,z,y,x){q(function u(){w.transform(v,t,A,z,y,x)})};this.setChannelMask=function(u,t){q(function v(){u.setChannelMask(t)})};this.setMiterLimit=function(v,t){q(function u(){v.setMiterLimit(t)})};this.dispose=function r(t){q(function u(){t.dispose()})};this.distort=function p(v,u,t,A,z,y,x){q(function w(){v.distort(u,t,A,z,y,x)})};this.move=function m(u,v,t,B,A){q(function w(){u.move(v,t,B,A)})};this.shade=function s(u,v){q(function t(){u.shade(v)})};this.scale=function(t){n.style.transform=n.style.WebkitTransform=n.style.MozTransform=n.style.OTransform=n.style.msTransform="scale("+t+","+t+")";l=t;i.style.width=(g*l)+"px";i.style.height=(d*l)+"px"};this.getScale=function(){return l};this.flatten=function(){var u=document.createElement("canvas");u.width=f.width;u.height=f.height;var v=u.getContext("2d");function t(A){var z=[];for(var y in A.children){z.push(A.children[y])}z.sort(function x(E,D){var F=E.z-D.z;if(F!==0){return F}var C=E.getElement();var G=D.getElement();var B=G.compareDocumentPosition(C);if(B&Node.DOCUMENT_POSITION_PRECEDING){return -1}if(B&Node.DOCUMENT_POSITION_FOLLOWING){return 1}return 0});return z}function w(D,A,F){if(D.width>0&&D.height>0){var z=v.globalAlpha;v.globalAlpha*=D.alpha/255;v.drawImage(D.getCanvas(),A,F);var C=t(D);for(var B=0;B<C.length;B++){var E=C[B];w(E,A+E.x,F+E.y)}v.globalAlpha=z}}w(f,0,0);return u}};Guacamole.Display.VisibleLayer=function(f,a){Guacamole.Layer.apply(this,[f,a]);var e=this;this.__unique_id=Guacamole.Display.VisibleLayer.__next_id++;this.alpha=255;this.x=0;this.y=0;this.z=0;this.matrix=[1,0,0,1,0,0];this.parent=null;this.children={};var d=e.getCanvas();d.style.position="absolute";d.style.left="0px";d.style.top="0px";var h=document.createElement("div");h.appendChild(d);h.style.width=f+"px";h.style.height=a+"px";h.style.position="absolute";h.style.left="0px";h.style.top="0px";h.style.overflow="hidden";var c=this.resize;this.resize=function(j,i){h.style.width=j+"px";h.style.height=i+"px";c(j,i)};this.getElement=function(){return h};var g="translate(0px, 0px)";var b="matrix(1, 0, 0, 1, 0, 0)";this.translate=function(i,j){e.x=i;e.y=j;g="translate("+i+"px,"+j+"px)";h.style.transform=h.style.WebkitTransform=h.style.MozTransform=h.style.OTransform=h.style.msTransform=g+" "+b};this.move=function(j,i,m,l){if(e.parent!==j){if(e.parent){delete e.parent.children[e.__unique_id]}e.parent=j;j.children[e.__unique_id]=e;var k=j.getElement();k.appendChild(h)}e.translate(i,m);e.z=l;h.style.zIndex=l};this.shade=function(i){e.alpha=i;h.style.opacity=i/255};this.dispose=function(){if(e.parent){delete e.parent.children[e.__unique_id];e.parent=null}if(h.parentNode){h.parentNode.removeChild(h)}};this.distort=function(j,i,n,m,l,k){e.matrix=[j,i,n,m,l,k];b="matrix("+j+","+i+","+n+","+m+","+l+","+k+")";h.style.transform=h.style.WebkitTransform=h.style.MozTransform=h.style.OTransform=h.style.msTransform=g+" "+b}};Guacamole.Display.VisibleLayer.__next_id=0;var Guacamole=Guacamole||{};Guacamole.InputSink=function InputSink(){var g=this;var c=document.createElement("textarea");c.style.position="fixed";c.style.outline="none";c.style.border="none";c.style.margin="0";c.style.padding="0";c.style.height="0";c.style.width="0";c.style.left="0";c.style.bottom="0";c.style.resize="none";c.style.background="transparent";c.style.color="transparent";c.addEventListener("keypress",function h(j){c.value=""},false);c.addEventListener("compositionend",function e(j){if(j.data){c.value=""}},false);c.addEventListener("input",function b(j){if(j.data&&!j.isComposing){c.value=""}},false);c.addEventListener("focus",function f(){window.setTimeout(function j(){c.click();c.select()},0)},true);this.focus=function i(){window.setTimeout(function j(){c.focus()},0)};this.getElement=function a(){return c};document.addEventListener("keydown",function d(l){var k=document.activeElement;if(k&&k!==document.body){var j=k.getBoundingClientRect();if(j.left+j.width>0&&j.top+j.height>0){return}}g.focus()},true)};var Guacamole=Guacamole||{};Guacamole.InputStream=function(a,b){var c=this;this.index=b;this.onblob=null;this.onend=null;this.sendAck=function(e,d){a.sendAck(c.index,e,d)}};var Guacamole=Guacamole||{};Guacamole.IntegerPool=function(){var b=this;var a=[];this.next_int=0;this.next=function(){if(a.length>0){return a.shift()}return b.next_int++};this.free=function(c){a.push(c)}};var Guacamole=Guacamole||{};Guacamole.JSONReader=function guacamoleJSONReader(g){var a=this;var f=new Guacamole.StringReader(g);var c="";this.getLength=function b(){return c.length};this.getJSON=function d(){return JSON.parse(c)};f.ontext=function h(i){c+=i;if(a.onprogress){a.onprogress(i.length)}};f.onend=function e(){if(a.onend){a.onend()}};this.onprogress=null;this.onend=null};var Guacamole=Guacamole||{};Guacamole.Keyboard=function Keyboard(b){var m=this;var B=Guacamole.Keyboard._nextID++;var f="_GUAC_KEYBOARD_HANDLED_BY_"+B;this.onkeydown=null;this.onkeyup=null;var z={keyupUnreliable:false,altIsTypableOnly:false,capsLockKeyupUnreliable:false};if(navigator&&navigator.platform){if(navigator.platform.match(/ipad|iphone|ipod/i)){z.keyupUnreliable=true}else{if(navigator.platform.match(/^mac/i)){z.altIsTypableOnly=true;z.capsLockKeyupUnreliable=true}}}var D=function(){var J=this;this.timestamp=new Date().getTime();this.defaultPrevented=false;this.keysym=null;this.reliable=false;this.getAge=function(){return new Date().getTime()-J.timestamp}};var E=function(O,N,L,J){D.apply(this);this.keyCode=O;this.keyIdentifier=N;this.key=L;this.location=J;this.keysym=G(L,J)||l(O,J);this.keyupReliable=!z.keyupUnreliable;if(this.keysym&&!y(this.keysym)){this.reliable=true}if(!this.keysym&&d(O,N)){this.keysym=G(N,J,m.modifiers.shift)}if(m.modifiers.meta&&this.keysym!==65511&&this.keysym!==65512){this.keyupReliable=false}else{if(this.keysym===65509&&z.capsLockKeyupUnreliable){this.keyupReliable=false}}var K=!m.modifiers.ctrl&&!z.altIsTypableOnly;var M=!m.modifiers.alt;if((M&&m.modifiers.ctrl)||(K&&m.modifiers.alt)||m.modifiers.meta||m.modifiers.hyper){this.reliable=true}o[O]=this.keysym};E.prototype=new D();var a=function(J){D.apply(this);this.charCode=J;this.keysym=v(J);this.reliable=true};a.prototype=new D();var n=function(M,L,K,J){D.apply(this);this.keyCode=M;this.keyIdentifier=L;this.key=K;this.location=J;this.keysym=l(M,J)||G(K,J);if(!m.pressed[this.keysym]){this.keysym=o[M]||this.keysym}this.reliable=true};n.prototype=new D();var I=[];var C={8:[65288],9:[65289],12:[65291,65291,65291,65461],13:[65293],16:[65505,65505,65506],17:[65507,65507,65508],18:[65513,65513,65027],19:[65299],20:[65509],27:[65307],32:[32],33:[65365,65365,65365,65465],34:[65366,65366,65366,65459],35:[65367,65367,65367,65457],36:[65360,65360,65360,65463],37:[65361,65361,65361,65460],38:[65362,65362,65362,65464],39:[65363,65363,65363,65462],40:[65364,65364,65364,65458],45:[65379,65379,65379,65456],46:[65535,65535,65535,65454],91:[65515],92:[65383],93:null,96:[65456],97:[65457],98:[65458],99:[65459],100:[65460],101:[65461],102:[65462],103:[65463],104:[65464],105:[65465],106:[65450],107:[65451],109:[65453],110:[65454],111:[65455],112:[65470],113:[65471],114:[65472],115:[65473],116:[65474],117:[65475],118:[65476],119:[65477],120:[65478],121:[65479],122:[65480],123:[65481],144:[65407],145:[65300],225:[65027]};var i={Again:[65382],AllCandidates:[65341],Alphanumeric:[65328],Alt:[65513,65513,65027],Attn:[64782],AltGraph:[65027],ArrowDown:[65364],ArrowLeft:[65361],ArrowRight:[65363],ArrowUp:[65362],Backspace:[65288],CapsLock:[65509],Cancel:[65385],Clear:[65291],Convert:[65313],Copy:[64789],Crsel:[64796],CrSel:[64796],CodeInput:[65335],Compose:[65312],Control:[65507,65507,65508],ContextMenu:[65383],Delete:[65535],Down:[65364],End:[65367],Enter:[65293],EraseEof:[64774],Escape:[65307],Execute:[65378],Exsel:[64797],ExSel:[64797],F1:[65470],F2:[65471],F3:[65472],F4:[65473],F5:[65474],F6:[65475],F7:[65476],F8:[65477],F9:[65478],F10:[65479],F11:[65480],F12:[65481],F13:[65482],F14:[65483],F15:[65484],F16:[65485],F17:[65486],F18:[65487],F19:[65488],F20:[65489],F21:[65490],F22:[65491],F23:[65492],F24:[65493],Find:[65384],GroupFirst:[65036],GroupLast:[65038],GroupNext:[65032],GroupPrevious:[65034],FullWidth:null,HalfWidth:null,HangulMode:[65329],Hankaku:[65321],HanjaMode:[65332],Help:[65386],Hiragana:[65317],HiraganaKatakana:[65319],Home:[65360],Hyper:[65517,65517,65518],Insert:[65379],JapaneseHiragana:[65317],JapaneseKatakana:[65318],JapaneseRomaji:[65316],JunjaMode:[65336],KanaMode:[65325],KanjiMode:[65313],Katakana:[65318],Left:[65361],Meta:[65511,65511,65512],ModeChange:[65406],NumLock:[65407],PageDown:[65366],PageUp:[65365],Pause:[65299],Play:[64790],PreviousCandidate:[65342],PrintScreen:[65377],Redo:[65382],Right:[65363],RomanCharacters:null,Scroll:[65300],Select:[65376],Separator:[65452],Shift:[65505,65505,65506],SingleCandidate:[65340],Super:[65515,65515,65516],Tab:[65289],UIKeyInputDownArrow:[65364],UIKeyInputEscape:[65307],UIKeyInputLeftArrow:[65361],UIKeyInputRightArrow:[65363],UIKeyInputUpArrow:[65362],Up:[65362],Undo:[65381],Win:[65515],Zenkaku:[65320],ZenkakuHankaku:[65322]};var x={65027:true,65505:true,65506:true,65507:true,65508:true,65509:true,65511:true,65512:true,65513:true,65514:true,65515:true,65516:true};this.modifiers=new Guacamole.Keyboard.ModifierState();this.pressed={};var e={};var t={};var o={};var c=null;var s=null;var p=function p(K,J){if(!K){return null}return K[J]||K[0]};var y=function y(J){return(J>=0&&J<=255)||(J&4294901760)===16777216};function G(L,K,O){if(!L){return null}var N;var J=L.indexOf("U+");if(J>=0){var M=L.substring(J+2);N=String.fromCharCode(parseInt(M,16))}else{if(L.length===1&&K!==3){N=L}else{return p(i[L],K)}}if(O===true){N=N.toUpperCase()}else{if(O===false){N=N.toLowerCase()}}var P=N.charCodeAt(0);return v(P)}function r(J){return J<=31||(J>=127&&J<=159)}function v(J){if(r(J)){return 65280|J}if(J>=0&&J<=255){return J}if(J>=256&&J<=1114111){return 16777216|J}return null}function l(K,J){return p(C[K],J)}var d=function d(M,L){if(!L){return false}var J=L.indexOf("U+");if(J===-1){return true}var K=parseInt(L.substring(J+2),16);if(M!==K){return true}if((M>=65&&M<=90)||(M>=48&&M<=57)){return true}return false};this.press=function(K){if(K===null){return}if(!m.pressed[K]){m.pressed[K]=true;if(m.onkeydown){var J=m.onkeydown(K);t[K]=J;window.clearTimeout(c);window.clearInterval(s);if(!x[K]){c=window.setTimeout(function(){s=window.setInterval(function(){m.onkeyup(K);m.onkeydown(K)},50)},500)}return J}}return t[K]||false};this.release=function(J){if(m.pressed[J]){delete m.pressed[J];delete e[J];window.clearTimeout(c);window.clearInterval(s);if(J!==null&&m.onkeyup){m.onkeyup(J)}}};this.type=function h(M){for(var J=0;J<M.length;J++){var L=M.codePointAt?M.codePointAt(J):M.charCodeAt(J);var K=v(L);m.press(K);m.release(K)}};this.reset=function(){for(var J in m.pressed){m.release(parseInt(J))}I=[]};var H=function H(M,J,L,N){var K;if(L.indexOf(N.keysym)!==-1){return}if(M&&J===false){for(K=0;K<L.length;K++){m.release(L[K])}}else{if(!M&&J){for(K=0;K<L.length;K++){if(m.pressed[L[K]]){return}}var O=L[0];if(N.keysym){e[O]=true}m.press(O)}}};var k=function k(L,K){var J=Guacamole.Keyboard.ModifierState.fromKeyboardEvent(L);H(m.modifiers.alt,J.alt,[65513,65514,65027],K);H(m.modifiers.shift,J.shift,[65505,65506],K);H(m.modifiers.ctrl,J.ctrl,[65507,65508],K);H(m.modifiers.meta,J.meta,[65511,65512],K);H(m.modifiers.hyper,J.hyper,[65515,65516],K);m.modifiers=J};var g=function g(){for(var J in m.pressed){if(!e[J]){return false}}return true};function j(){var K=u();if(!K){return false}var J;do{J=K;K=u()}while(K!==null);if(g()){m.reset()}return J.defaultPrevented}var A=function A(J){if(!m.modifiers.ctrl||!m.modifiers.alt){return}if(J>=65&&J<=90){return}if(J>=97&&J<=122){return}if(J<=255||(J&4278190080)===16777216){m.release(65507);m.release(65508);m.release(65513);m.release(65514)}};var u=function u(){var M=I[0];if(!M){return null}if(M instanceof E){var L=null;var N=[];if(M.reliable){L=M.keysym;N=I.splice(0,1)}else{if(I[1] instanceof a){L=I[1].keysym;N=I.splice(0,2)}else{if(I[1]){L=M.keysym;N=I.splice(0,1)}}}if(N.length>0){if(L){A(L);var J=!m.press(L);o[M.keyCode]=L;if(!M.keyupReliable){m.release(L)}for(var K=0;K<N.length;K++){N[K].defaultPrevented=J}}return M}}else{if(M instanceof n&&!z.keyupUnreliable){var L=M.keysym;if(L){m.release(L);delete o[M.keyCode];M.defaultPrevented=true}else{m.reset();return M}return I.shift()}else{return I.shift()}}return null};var F=function F(J){if("location" in J){return J.location}if("keyLocation" in J){return J.keyLocation}return 0};var w=function w(J){if(J[f]){return false}J[f]=true;return true};this.listenTo=function q(J){J.addEventListener("keydown",function(O){if(!m.onkeydown){return}if(!w(O)){return}var N;if(window.event){N=window.event.keyCode}else{if(O.which){N=O.which}}var M=new E(N,O.keyIdentifier,O.key,F(O));k(O,M);if(N===229){return}I.push(M);if(j()){O.preventDefault()}},true);J.addEventListener("keypress",function(O){if(!m.onkeydown&&!m.onkeyup){return}if(!w(O)){return}var N;if(window.event){N=window.event.keyCode}else{if(O.which){N=O.which}}var M=new a(N);k(O,M);I.push(M);if(j()){O.preventDefault()}},true);J.addEventListener("keyup",function(O){if(!m.onkeyup){return}if(!w(O)){return}O.preventDefault();var N;if(window.event){N=window.event.keyCode}else{if(O.which){N=O.which}}var M=new n(N,O.keyIdentifier,O.key,F(O));k(O,M);I.push(M);j()},true);var L=function L(M){if(!m.onkeydown&&!m.onkeyup){return}if(!w(M)){return}if(M.data&&!M.isComposing){J.removeEventListener("compositionend",K,false);m.type(M.data)}};var K=function K(M){if(!m.onkeydown&&!m.onkeyup){return}if(!w(M)){return}if(M.data){J.removeEventListener("input",L,false);m.type(M.data)}};J.addEventListener("input",L,false);J.addEventListener("compositionend",K,false)};if(b){m.listenTo(b)}};Guacamole.Keyboard._nextID=0;Guacamole.Keyboard.ModifierState=function(){this.shift=false;this.ctrl=false;this.alt=false;this.meta=false;this.hyper=false};Guacamole.Keyboard.ModifierState.fromKeyboardEvent=function(b){var a=new Guacamole.Keyboard.ModifierState();a.shift=b.shiftKey;a.ctrl=b.ctrlKey;a.alt=b.altKey;a.meta=b.metaKey;if(b.getModifierState){a.hyper=b.getModifierState("OS")||b.getModifierState("Super")||b.getModifierState("Hyper")||b.getModifierState("Win")}return a};var Guacamole=Guacamole||{};Guacamole.Layer=function(a,n){var h=this;var l=64;var d=document.createElement("canvas");var b=d.getContext("2d");b.save();var g=true;var e=true;var m=0;var j={1:"destination-in",2:"destination-out",4:"source-in",6:"source-atop",8:"source-out",9:"destination-atop",10:"xor",11:"destination-over",12:"copy",14:"source-over",15:"lighter"};var c=function c(t,r){t=t||0;r=r||0;var p=Math.ceil(t/l)*l;var s=Math.ceil(r/l)*l;if(d.width!==p||d.height!==s){var u=null;if(!g&&d.width!==0&&d.height!==0){u=document.createElement("canvas");u.width=Math.min(h.width,t);u.height=Math.min(h.height,r);var q=u.getContext("2d");q.drawImage(d,0,0,u.width,u.height,0,0,u.width,u.height)}var o=b.globalCompositeOperation;d.width=p;d.height=s;if(u){b.drawImage(u,0,0,u.width,u.height,0,0,u.width,u.height)}b.globalCompositeOperation=o;m=0;b.save()}else{h.reset()}h.width=t;h.height=r};function f(o,v,p,q){var t=p+o;var s=q+v;var r;if(t>h.width){r=t}else{r=h.width}var u;if(s>h.height){u=s}else{u=h.height}h.resize(r,u)}this.autosize=false;this.width=a;this.height=n;this.getCanvas=function k(){return d};this.toCanvas=function i(){var o=document.createElement("canvas");o.width=h.width;o.height=h.height;var p=o.getContext("2d");p.drawImage(h.getCanvas(),0,0);return o};this.resize=function(p,o){if(p!==h.width||o!==h.height){c(p,o)}};this.drawImage=function(o,q,p){if(h.autosize){f(o,q,p.width,p.height)}b.drawImage(p,o,q);g=false};this.transfer=function(A,r,p,s,D,B,z,u){var t=A.getCanvas();if(r>=t.width||p>=t.height){return}if(r+s>t.width){s=t.width-r}if(p+D>t.height){D=t.height-p}if(s===0||D===0){return}if(h.autosize){f(B,z,s,D)}var o=A.getCanvas().getContext("2d").getImageData(r,p,s,D);var w=b.getImageData(B,z,s,D);for(var v=0;v<s*D*4;v+=4){var q=new Guacamole.Layer.Pixel(o.data[v],o.data[v+1],o.data[v+2],o.data[v+3]);var C=new Guacamole.Layer.Pixel(w.data[v],w.data[v+1],w.data[v+2],w.data[v+3]);u(q,C);w.data[v]=C.red;w.data[v+1]=C.green;w.data[v+2]=C.blue;w.data[v+3]=C.alpha}b.putImageData(w,B,z);g=false};this.put=function(u,q,p,r,w,v,t){var s=u.getCanvas();if(q>=s.width||p>=s.height){return}if(q+r>s.width){r=s.width-q}if(p+w>s.height){w=s.height-p}if(r===0||w===0){return}if(h.autosize){f(v,t,r,w)}var o=u.getCanvas().getContext("2d").getImageData(q,p,r,w);b.putImageData(o,v,t);g=false};this.copy=function(s,q,p,r,u,o,v){var t=s.getCanvas();if(q>=t.width||p>=t.height){return}if(q+r>t.width){r=t.width-q}if(p+u>t.height){u=t.height-p}if(r===0||u===0){return}if(h.autosize){f(o,v,r,u)}b.drawImage(t,q,p,r,u,o,v,r,u);g=false};this.moveTo=function(o,p){if(e){b.beginPath();e=false}if(h.autosize){f(o,p,0,0)}b.moveTo(o,p)};this.lineTo=function(o,p){if(e){b.beginPath();e=false}if(h.autosize){f(o,p,0,0)}b.lineTo(o,p)};this.arc=function(p,t,o,s,q,r){if(e){b.beginPath();e=false}if(h.autosize){f(p,t,0,0)}b.arc(p,t,o,s,q,r)};this.curveTo=function(q,p,s,r,o,t){if(e){b.beginPath();e=false}if(h.autosize){f(o,t,0,0)}b.bezierCurveTo(q,p,s,r,o,t)};this.close=function(){b.closePath();e=true};this.rect=function(o,r,p,q){if(e){b.beginPath();e=false}if(h.autosize){f(o,r,p,q)}b.rect(o,r,p,q)};this.clip=function(){b.clip();e=true};this.strokeColor=function(s,v,q,u,t,o,p){b.lineCap=s;b.lineJoin=v;b.lineWidth=q;b.strokeStyle="rgba("+u+","+t+","+o+","+p/255+")";b.stroke();g=false;e=true};this.fillColor=function(s,q,o,p){b.fillStyle="rgba("+s+","+q+","+o+","+p/255+")";b.fill();g=false;e=true};this.strokeLayer=function(q,r,p,o){b.lineCap=q;b.lineJoin=r;b.lineWidth=p;b.strokeStyle=b.createPattern(o.getCanvas(),"repeat");b.stroke();g=false;e=true};this.fillLayer=function(o){b.fillStyle=b.createPattern(o.getCanvas(),"repeat");b.fill();g=false;e=true};this.push=function(){b.save();m++};this.pop=function(){if(m>0){b.restore();m--}};this.reset=function(){while(m>0){b.restore();m--}b.restore();b.save();b.beginPath();e=false};this.setTransform=function(p,o,t,s,r,q){b.setTransform(p,o,t,s,r,q)};this.transform=function(p,o,t,s,r,q){b.transform(p,o,t,s,r,q)};this.setChannelMask=function(o){b.globalCompositeOperation=j[o]};this.setMiterLimit=function(o){b.miterLimit=o};c(a,n);d.style.zIndex=-1};Guacamole.Layer.ROUT=2;Guacamole.Layer.ATOP=6;Guacamole.Layer.XOR=10;Guacamole.Layer.ROVER=11;Guacamole.Layer.OVER=14;Guacamole.Layer.PLUS=15;Guacamole.Layer.RIN=1;Guacamole.Layer.IN=4;Guacamole.Layer.OUT=8;Guacamole.Layer.RATOP=9;Guacamole.Layer.SRC=12;Guacamole.Layer.Pixel=function(f,e,c,d){this.red=f;this.green=e;this.blue=c;this.alpha=d};var Guacamole=Guacamole||{};Guacamole.Mouse=function(f){var e=this;this.touchMouseThreshold=3;this.scrollThreshold=53;this.PIXELS_PER_LINE=18;this.PIXELS_PER_PAGE=this.PIXELS_PER_LINE*16;this.currentState=new Guacamole.Mouse.State(0,0,false,false,false,false,false);this.onmousedown=null;this.onmouseup=null;this.onmousemove=null;this.onmouseout=null;var g=0;var a=0;function d(i){i.stopPropagation();if(i.preventDefault){i.preventDefault()}i.returnValue=false}f.addEventListener("contextmenu",function(i){d(i)},false);f.addEventListener("mousemove",function(i){d(i);if(g){g--;return}e.currentState.fromClientPosition(f,i.clientX,i.clientY);if(e.onmousemove){e.onmousemove(e.currentState)}},false);f.addEventListener("mousedown",function(i){d(i);if(g){return}switch(i.button){case 0:e.currentState.left=true;break;case 1:e.currentState.middle=true;break;case 2:e.currentState.right=true;break}if(e.onmousedown){e.onmousedown(e.currentState)}},false);f.addEventListener("mouseup",function(i){d(i);if(g){return}switch(i.button){case 0:e.currentState.left=false;break;case 1:e.currentState.middle=false;break;case 2:e.currentState.right=false;break}if(e.onmouseup){e.onmouseup(e.currentState)}},false);f.addEventListener("mouseout",function(j){if(!j){j=window.event}var i=j.relatedTarget||j.toElement;while(i){if(i===f){return}i=i.parentNode}d(j);if(e.currentState.left||e.currentState.middle||e.currentState.right){e.currentState.left=false;e.currentState.middle=false;e.currentState.right=false;if(e.onmouseup){e.onmouseup(e.currentState)}}if(e.onmouseout){e.onmouseout()}},false);f.addEventListener("selectstart",function(i){d(i)},false);function c(){g=e.touchMouseThreshold}f.addEventListener("touchmove",c,false);f.addEventListener("touchstart",c,false);f.addEventListener("touchend",c,false);function h(i){var j=i.deltaY||-i.wheelDeltaY||-i.wheelDelta;if(j){if(i.deltaMode===1){j=i.deltaY*e.PIXELS_PER_LINE}else{if(i.deltaMode===2){j=i.deltaY*e.PIXELS_PER_PAGE}}}else{j=i.detail*e.PIXELS_PER_LINE}a+=j;if(a<=-e.scrollThreshold){do{if(e.onmousedown){e.currentState.up=true;e.onmousedown(e.currentState)}if(e.onmouseup){e.currentState.up=false;e.onmouseup(e.currentState)}a+=e.scrollThreshold}while(a<=-e.scrollThreshold);a=0}if(a>=e.scrollThreshold){do{if(e.onmousedown){e.currentState.down=true;e.onmousedown(e.currentState)}if(e.onmouseup){e.currentState.down=false;e.onmouseup(e.currentState)}a-=e.scrollThreshold}while(a>=e.scrollThreshold);a=0}d(i)}f.addEventListener("DOMMouseScroll",h,false);f.addEventListener("mousewheel",h,false);f.addEventListener("wheel",h,false);var b=(function(){var j=document.createElement("div");if(!("cursor" in j.style)){return false}try{j.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==) 0 0, auto"}catch(i){return false}return/\burl\([^()]*\)\s+0\s+0\b/.test(j.style.cursor||"")})();this.setCursor=function(j,i,l){if(b){var k=j.toDataURL("image/png");f.style.cursor="url("+k+") "+i+" "+l+", auto";return true}return false}};Guacamole.Mouse.State=function(b,h,f,c,d,a,g){var e=this;this.x=b;this.y=h;this.left=f;this.middle=c;this.right=d;this.up=a;this.down=g;this.fromClientPosition=function(j,n,m){e.x=n-j.offsetLeft;e.y=m-j.offsetTop;var l=j.offsetParent;while(l&&!(l===document.body)){e.x-=l.offsetLeft-l.scrollLeft;e.y-=l.offsetTop-l.scrollTop;l=l.offsetParent}if(l){var k=document.body.scrollLeft||document.documentElement.scrollLeft;var i=document.body.scrollTop||document.documentElement.scrollTop;e.x-=l.offsetLeft-k;e.y-=l.offsetTop-i}}};Guacamole.Mouse.Touchpad=function(d){var c=this;this.scrollThreshold=20*(window.devicePixelRatio||1);this.clickTimingThreshold=250;this.clickMoveThreshold=10*(window.devicePixelRatio||1);this.currentState=new Guacamole.Mouse.State(0,0,false,false,false,false,false);this.onmousedown=null;this.onmouseup=null;this.onmousemove=null;var a=0;var h=0;var g=0;var f=0;var e=0;var b={1:"left",2:"right",3:"middle"};var j=false;var i=null;d.addEventListener("touchend",function(m){m.preventDefault();if(j&&m.touches.length===0){var l=new Date().getTime();var k=b[a];if(c.currentState[k]){c.currentState[k]=false;if(c.onmouseup){c.onmouseup(c.currentState)}if(i){window.clearTimeout(i);i=null}}if(l-f<=c.clickTimingThreshold&&e<c.clickMoveThreshold){c.currentState[k]=true;if(c.onmousedown){c.onmousedown(c.currentState)}i=window.setTimeout(function(){c.currentState[k]=false;if(c.onmouseup){c.onmouseup(c.currentState)}j=false},c.clickTimingThreshold)}if(!i){j=false}}},false);d.addEventListener("touchstart",function(l){l.preventDefault();a=Math.min(l.touches.length,3);if(i){window.clearTimeout(i);i=null}if(!j){j=true;var k=l.touches[0];h=k.clientX;g=k.clientY;f=new Date().getTime();e=0}},false);d.addEventListener("touchmove",function(m){m.preventDefault();var q=m.touches[0];var p=q.clientX-h;var o=q.clientY-g;e+=Math.abs(p)+Math.abs(o);if(a===1){var l=e/(new Date().getTime()-f);var n=1+l;c.currentState.x+=p*n;c.currentState.y+=o*n;if(c.currentState.x<0){c.currentState.x=0}else{if(c.currentState.x>=d.offsetWidth){c.currentState.x=d.offsetWidth-1}}if(c.currentState.y<0){c.currentState.y=0}else{if(c.currentState.y>=d.offsetHeight){c.currentState.y=d.offsetHeight-1}}if(c.onmousemove){c.onmousemove(c.currentState)}h=q.clientX;g=q.clientY}else{if(a===2){if(Math.abs(o)>=c.scrollThreshold){var k;if(o>0){k="down"}else{k="up"}c.currentState[k]=true;if(c.onmousedown){c.onmousedown(c.currentState)}c.currentState[k]=false;if(c.onmouseup){c.onmouseup(c.currentState)}h=q.clientX;g=q.clientY}}}},false)};Guacamole.Mouse.Touchscreen=function(e){var d=this;var k=false;var j=null;var i=null;var l=null;var h=null;this.scrollThreshold=20*(window.devicePixelRatio||1);this.clickTimingThreshold=250;this.clickMoveThreshold=16*(window.devicePixelRatio||1);this.longPressThreshold=500;this.currentState=new Guacamole.Mouse.State(0,0,false,false,false,false,false);this.onmousedown=null;this.onmouseup=null;this.onmousemove=null;function m(o){if(!d.currentState[o]){d.currentState[o]=true;if(d.onmousedown){d.onmousedown(d.currentState)}}}function g(o){if(d.currentState[o]){d.currentState[o]=false;if(d.onmouseup){d.onmouseup(d.currentState)}}}function c(o){m(o);g(o)}function b(o,p){d.currentState.fromClientPosition(e,o,p);if(d.onmousemove){d.onmousemove(d.currentState)}}function a(o){var r=o.touches[0]||o.changedTouches[0];var q=r.clientX-j;var p=r.clientY-i;return Math.sqrt(q*q+p*p)>=d.clickMoveThreshold}function f(o){var p=o.touches[0];k=true;j=p.clientX;i=p.clientY}function n(){window.clearTimeout(l);window.clearTimeout(h);k=false}e.addEventListener("touchend",function(o){if(!k){return}if(o.touches.length!==0||o.changedTouches.length!==1){n();return}window.clearTimeout(h);g("left");if(!a(o)){o.preventDefault();if(!d.currentState.left){var p=o.changedTouches[0];b(p.clientX,p.clientY);m("left");l=window.setTimeout(function(){g("left");n()},d.clickTimingThreshold)}}},false);e.addEventListener("touchstart",function(o){if(o.touches.length!==1){n();return}o.preventDefault();f(o);window.clearTimeout(l);h=window.setTimeout(function(){var p=o.touches[0];b(p.clientX,p.clientY);c("right");n()},d.longPressThreshold)},false);e.addEventListener("touchmove",function(o){if(!k){return}if(a(o)){window.clearTimeout(h)}if(o.touches.length!==1){n();return}if(d.currentState.left){o.preventDefault();var p=o.touches[0];b(p.clientX,p.clientY)}},false)};var Guacamole=Guacamole||{};var Guacamole=Guacamole||{};Guacamole.Object=function guacamoleObject(e,f){var g=this;var h={};var a=function a(j){var k=h[j];if(!k){return null}var l=k.shift();if(k.length===0){delete h[j]}return l};var d=function d(j,l){var k=h[j];if(!k){k=[];h[j]=k}k.push(l)};this.index=f;this.onbody=function i(l,j,k){var m=a(k);if(m){m(l,j)}};this.onundefine=null;this.requestInputStream=function c(k,j){if(j){d(k,j)}e.requestObjectInputStream(g.index,k)};this.createOutputStream=function b(j,k){return e.createObjectOutputStream(g.index,j,k)}};Guacamole.Object.ROOT_STREAM="/";Guacamole.Object.STREAM_INDEX_MIMETYPE="application/vnd.glyptodon.guacamole.stream-index+json";var Guacamole=Guacamole||{};Guacamole.OnScreenKeyboard=function(q){var e=this;var h={};var b={};var d=[];var i=function i(u,v){if(u.classList){u.classList.add(v)}else{u.className+=" "+v}};var j=function j(u,w){if(u.classList){u.classList.remove(w)}else{u.className=u.className.replace(/([^ ]+)[ ]*/g,function v(y,x){if(x===w){return""}return y})}};var t=0;var f=function f(){t=e.touchMouseThreshold};var r=function r(v,w,u,x){this.width=w;this.height=u;this.scale=function(y){v.style.width=(w*y)+"px";v.style.height=(u*y)+"px";if(x){v.style.lineHeight=(u*y)+"px";v.style.fontSize=y+"px"}}};var l=function l(w){for(var v=0;v<w.length;v++){var u=w[v];if(!(u in h)){return false}}return true};var g=function g(w){var x=e.keys[w];if(!x){return null}for(var u=x.length-1;u>=0;u--){var v=x[u];if(l(v.requires)){return v}}return null};var m=function m(x,y){if(!b[x]){i(y,"guac-keyboard-pressed");var w=g(x);if(w.modifier){var v="guac-keyboard-modifier-"+n(w.modifier);var u=h[w.modifier];if(!u){i(c,v);h[w.modifier]=w.keysym;if(e.onkeydown){e.onkeydown(w.keysym)}}else{j(c,v);delete h[w.modifier];if(e.onkeyup){e.onkeyup(u)}}}else{if(e.onkeydown){e.onkeydown(w.keysym)}}b[x]=true}};var o=function o(v,w){if(b[v]){j(w,"guac-keyboard-pressed");var u=g(v);if(!u.modifier&&e.onkeyup){e.onkeyup(u.keysym)}b[v]=false}};var c=document.createElement("div");c.className="guac-keyboard";c.onselectstart=c.onmousemove=c.onmouseup=c.onmousedown=function k(u){if(t){t--}u.stopPropagation();return false};this.touchMouseThreshold=3;this.onkeydown=null;this.onkeyup=null;this.layout=new Guacamole.OnScreenKeyboard.Layout(q);this.getElement=function(){return c};this.resize=function(w){var x=Math.floor(w*10/e.layout.width)/10;for(var v=0;v<d.length;v++){var u=d[v];u.scale(x)}};var s=function s(v,u){if(u instanceof Array){var x=[];for(var w=0;w<u.length;w++){x.push(new Guacamole.OnScreenKeyboard.Key(u[w],v))}return x}if(typeof u==="number"){return[new Guacamole.OnScreenKeyboard.Key({name:v,keysym:u})]}if(typeof u==="string"){return[new Guacamole.OnScreenKeyboard.Key({name:v,title:u})]}return[new Guacamole.OnScreenKeyboard.Key(u,v)]};var a=function a(w){var v={};for(var u in q.keys){v[u]=s(u,w[u])}return v};this.keys=a(q.keys);var n=function n(u){var v=u.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[^A-Za-z0-9]+/g,"-").toLowerCase();return v};var p=function p(A,x,v){var B;var u=document.createElement("div");if(v){i(u,"guac-keyboard-"+n(v))}if(x instanceof Array){i(u,"guac-keyboard-group");for(B=0;B<x.length;B++){p(u,x[B])}}else{if(x instanceof Object){i(u,"guac-keyboard-group");var F=Object.keys(x).sort();for(B=0;B<F.length;B++){var v=F[B];p(u,x[v],v)}}else{if(typeof x==="number"){i(u,"guac-keyboard-gap");d.push(new r(u,x,x))}else{if(typeof x==="string"){var H=x;if(H.length===1){H="0x"+H.charCodeAt(0).toString(16)}i(u,"guac-keyboard-key-container");var J=document.createElement("div");J.className="guac-keyboard-key guac-keyboard-key-"+n(H);var I=e.keys[x];if(I){for(B=0;B<I.length;B++){var G=I[B];var E=document.createElement("div");E.className="guac-keyboard-cap";E.textContent=G.title;for(var y=0;y<G.requires.length;y++){var K=G.requires[y];i(E,"guac-keyboard-requires-"+n(K));i(J,"guac-keyboard-uses-"+n(K))}J.appendChild(E)}}u.appendChild(J);d.push(new r(u,e.layout.keyWidths[x]||1,1,true));var D=function D(L){L.preventDefault();t=e.touchMouseThreshold;m(x,J)};var w=function w(L){L.preventDefault();t=e.touchMouseThreshold;o(x,J)};var z=function z(L){L.preventDefault();if(t===0){m(x,J)}};var C=function C(L){L.preventDefault();if(t===0){o(x,J)}};J.addEventListener("touchstart",D,true);J.addEventListener("touchend",w,true);J.addEventListener("mousedown",z,true);J.addEventListener("mouseup",C,true);J.addEventListener("mouseout",C,true)}}}}A.appendChild(u)};p(c,q.layout)};Guacamole.OnScreenKeyboard.Layout=function(a){this.language=a.language;this.type=a.type;this.keys=a.keys;this.layout=a.layout;this.width=a.width;this.keyWidths=a.keyWidths||{}};Guacamole.OnScreenKeyboard.Key=function(c,a){this.name=a||c.name;this.title=c.title||this.name;this.keysym=c.keysym||(function b(e){if(!e||e.length!==1){return null}var d=e.charCodeAt(0);if(d>=0&&d<=255){return d}if(d>=256&&d<=1114111){return 16777216|d}return null})(this.title);this.modifier=c.modifier;this.requires=c.requires||[]};var Guacamole=Guacamole||{};Guacamole.OutputStream=function(a,b){var c=this;this.index=b;this.onack=null;this.sendBlob=function(d){a.sendBlob(c.index,d)};this.sendEnd=function(){a.endStream(c.index)}};var Guacamole=Guacamole||{};Guacamole.Parser=function(){var e=this;var b="";var d=[];var c=-1;var a=0;this.receive=function(k){if(a>4096&&c>=a){b=b.substring(a);c-=a;a=0}b+=k;while(c<b.length){if(c>=a){var h=b.substring(a,c);var g=b.substring(c,c+1);d.push(h);if(g==";"){var j=d.shift();if(e.oninstruction!=null){e.oninstruction(j,d)}d.length=0}else{if(g!=","){throw new Error("Illegal terminator.")}}a=c+1}var f=b.indexOf(".",a);if(f!=-1){var i=parseInt(b.substring(c+1,f));if(isNaN(i)){throw new Error("Non-numeric character in element length.")}a=f+1;c=a+i}else{a=b.length;break}}};this.oninstruction=null};var Guacamole=Guacamole||{};Guacamole.RawAudioFormat=function RawAudioFormat(a){this.bytesPerSample=a.bytesPerSample;this.channels=a.channels;this.rate=a.rate};Guacamole.RawAudioFormat.parse=function parseFormat(g){var b;var f=null;var e=1;if(g.substring(0,9)==="audio/L8;"){g=g.substring(9);b=1}else{if(g.substring(0,10)==="audio/L16;"){g=g.substring(10);b=2}else{return null}}var k=g.split(",");for(var d=0;d<k.length;d++){var j=k[d];var c=j.indexOf("=");if(c===-1){return null}var a=j.substring(0,c);var h=j.substring(c+1);switch(a){case"channels":e=parseInt(h);break;case"rate":f=parseInt(h);break;default:return null}}if(f===null){return null}return new Guacamole.RawAudioFormat({bytesPerSample:b,channels:e,rate:f})};var Guacamole=Guacamole||{};Guacamole.SessionRecording=function SessionRecording(v){var b=this;var m=16384;var x=5000;var i=5;var q=[];var a=[];var r=0;var j=0;var s=new Guacamole.SessionRecording._PlaybackTunnel();var f=new Guacamole.Client(s);var l=-1;var g=null;var d=null;var y=null;f.connect();f.getDisplay().showCursor(false);v.oninstruction=function B(I,G){var F=new Guacamole.SessionRecording._Frame.Instruction(I,G.slice());a.push(F);r+=F.getSize();if(I==="sync"){var H=parseInt(G[0]);var J=new Guacamole.SessionRecording._Frame(H,a);q.push(J);if(q.length===1||(r>=m&&H-j>=x)){J.keyframe=true;j=H;r=0}a=[];if(b.onprogress){b.onprogress(b.getDuration())}}};var u=function u(F){if(q.length===0){return 0}return F-q[0].timestamp};var o=function o(G,H,J){if(G===H){return G}var F=Math.floor((G+H)/2);var I=u(q[F].timestamp);if(J<I&&F>G){return o(G,F-1,J)}if(J>I&&F<H){return o(F+1,H,J)}return F};var A=function A(G){var I=q[G];for(var H=0;H<I.instructions.length;H++){var F=I.instructions[H];s.receiveInstruction(F.opcode,F.args)}if(I.keyframe&&!I.clientState){f.exportState(function J(K){I.clientState=K})}};var n=function n(H,I,G){w();y=window.setTimeout(function F(){var M;for(M=H;M>=0;M--){var L=q[M];if(M===l){break}if(L.clientState){f.importState(L.clientState);break}}M++;var J=new Date().getTime();for(;M<=H;M++){var K=new Date().getTime();if(K-J>=i){break}A(M)}l=M-1;if(b.onseek){b.onseek(b.getPosition())}if(l!==H){n(H,I,Math.max(G-(new Date().getTime()-J),0))}else{I()}},G||0)};var w=function w(){window.clearTimeout(y)};var t=function t(){if(l+1<q.length){var G=q[l+1];var I=G.timestamp-g+d;var F=Math.max(I-new Date().getTime(),0);n(l+1,function H(){t()},F)}else{b.pause()}};this.onprogress=null;this.onplay=null;this.onpause=null;this.onseek=null;this.connect=function c(F){v.connect(F)};this.disconnect=function C(){v.disconnect()};this.getDisplay=function p(){return f.getDisplay()};this.isPlaying=function h(){return !!g};this.getPosition=function D(){if(l===-1){return 0}return u(q[l].timestamp)};this.getDuration=function E(){if(q.length===0){return 0}return u(q[q.length-1].timestamp)};this.play=function z(){if(!b.isPlaying()&&l+1<q.length){if(b.onplay){b.onplay()}var F=q[l+1];g=F.timestamp;d=new Date().getTime();t()}};this.seek=function e(F,I){if(q.length===0){return}var H=b.isPlaying();b.pause();n(o(0,q.length-1,F),function G(){if(H){b.play()}if(I){I()}})};this.pause=function k(){w();if(b.isPlaying()){if(b.onpause){b.onpause()}g=null;d=null}}};Guacamole.SessionRecording._Frame=function _Frame(b,a){this.keyframe=false;this.timestamp=b;this.instructions=a;this.clientState=null};Guacamole.SessionRecording._Frame.Instruction=function Instruction(d,b){var a=this;this.opcode=d;this.args=b;this.getSize=function c(){var f=a.opcode.length;for(var e=0;e<a.args.length;e++){f+=a.args[e].length}return f}};Guacamole.SessionRecording._PlaybackTunnel=function _PlaybackTunnel(){var e=this;this.connect=function b(f){};this.sendMessage=function c(f){};this.disconnect=function a(){};this.receiveInstruction=function d(g,f){if(e.oninstruction){e.oninstruction(g,f)}}};var Guacamole=Guacamole||{};Guacamole.Status=function(b,a){var c=this;this.code=b;this.message=a;this.isError=function(){return c.code<0||c.code>255}};Guacamole.Status.Code={SUCCESS:0,UNSUPPORTED:256,SERVER_ERROR:512,SERVER_BUSY:513,UPSTREAM_TIMEOUT:514,UPSTREAM_ERROR:515,RESOURCE_NOT_FOUND:516,RESOURCE_CONFLICT:517,RESOURCE_CLOSED:518,UPSTREAM_NOT_FOUND:519,UPSTREAM_UNAVAILABLE:520,SESSION_CONFLICT:521,SESSION_TIMEOUT:522,SESSION_CLOSED:523,CLIENT_BAD_REQUEST:768,CLIENT_UNAUTHORIZED:769,CLIENT_FORBIDDEN:771,CLIENT_TIMEOUT:776,CLIENT_OVERRUN:781,CLIENT_BAD_TYPE:783,CLIENT_TOO_MANY:797};Guacamole.Status.Code.fromHTTPCode=function fromHTTPCode(a){switch(a){case 400:return Guacamole.Status.Code.CLIENT_BAD_REQUEST;case 403:return Guacamole.Status.Code.CLIENT_FORBIDDEN;case 404:return Guacamole.Status.Code.RESOURCE_NOT_FOUND;case 429:return Guacamole.Status.Code.CLIENT_TOO_MANY;case 503:return Guacamole.Status.Code.SERVER_BUSY}return Guacamole.Status.Code.SERVER_ERROR};Guacamole.Status.Code.fromWebSocketCode=function fromWebSocketCode(a){switch(a){case 1000:return Guacamole.Status.Code.SUCCESS;case 1006:case 1015:return Guacamole.Status.Code.UPSTREAM_NOT_FOUND;case 1001:case 1012:case 1013:case 1014:return Guacamole.Status.Code.UPSTREAM_UNAVAILABLE}return Guacamole.Status.Code.SERVER_ERROR};var Guacamole=Guacamole||{};Guacamole.StringReader=function(e){var d=this;var b=new Guacamole.ArrayBufferReader(e);var f=0;var c=0;function a(h){var l="";var g=new Uint8Array(h);for(var j=0;j<g.length;j++){var k=g[j];if(f===0){if((k|127)===127){l+=String.fromCharCode(k)}else{if((k|31)===223){c=k&31;f=1}else{if((k|15)===239){c=k&15;f=2}else{if((k|7)===247){c=k&7;f=3}else{l+="\uFFFD"}}}}}else{if((k|63)===191){c=(c<<6)|(k&63);f--;if(f===0){l+=String.fromCharCode(c)}}else{f=0;l+="\uFFFD"}}}return l}b.ondata=function(g){var h=a(g);if(d.ontext){d.ontext(h)}};b.onend=function(){if(d.onend){d.onend()}};this.ontext=null;this.onend=null};var Guacamole=Guacamole||{};Guacamole.StringWriter=function(h){var e=this;var c=new Guacamole.ArrayBufferWriter(h);var a=new Uint8Array(8192);var g=0;c.onack=function(i){if(e.onack){e.onack(i)}};function f(i){if(g+i>=a.length){var j=new Uint8Array((g+i)*2);j.set(a);a=j}g+=i}function d(m){var k;var j;if(m<=127){k=0;j=1}else{if(m<=2047){k=192;j=2}else{if(m<=65535){k=224;j=3}else{if(m<=2097151){k=240;j=4}else{d(65533);return}}}}f(j);var n=g-1;for(var l=1;l<j;l++){a[n--]=128|(m&63);m>>=6}a[n]=k|m}function b(m){for(var j=0;j<m.length;j++){var l=m.charCodeAt(j);d(l)}if(g>0){var k=a.subarray(0,g);g=0;return k}}this.sendText=function(i){if(i.length){c.sendData(b(i))}};this.sendEnd=function(){c.sendEnd()};this.onack=null};var Guacamole=Guacamole||{};Guacamole.Tunnel=function(){this.connect=function(c){};this.disconnect=function(){};this.sendMessage=function(c){};this.setState=function(c){if(c!==this.state){this.state=c;if(this.onstatechange){this.onstatechange(c)}}};this.setUUID=function a(c){this.uuid=c;if(this.onuuid){this.onuuid(c)}};this.isConnected=function b(){return this.state===Guacamole.Tunnel.State.OPEN||this.state===Guacamole.Tunnel.State.UNSTABLE};this.state=Guacamole.Tunnel.State.CONNECTING;this.receiveTimeout=15000;this.unstableThreshold=1500;this.uuid=null;this.onuuid=null;this.onerror=null;this.onstatechange=null;this.oninstruction=null};Guacamole.Tunnel.INTERNAL_DATA_OPCODE="";Guacamole.Tunnel.State={CONNECTING:0,OPEN:1,CLOSED:2,UNSTABLE:3};Guacamole.HTTPTunnel=function(i,p,y){var v=this;var l=i+"?connect";var z=i+"?read:";var o=i+"?write:";var k=1;var q=0;var w=k;var t=false;var h="";var c=!!p;var e=null;var n=null;var j=null;var d=500;var f=y||{};function m(B,C){for(var A in C){B.setRequestHeader(A,C[A])}}function b(){window.clearTimeout(e);window.clearTimeout(n);if(v.state===Guacamole.Tunnel.State.UNSTABLE){v.setState(Guacamole.Tunnel.State.OPEN)}e=window.setTimeout(function(){a(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},v.receiveTimeout);n=window.setTimeout(function(){v.setState(Guacamole.Tunnel.State.UNSTABLE)},v.unstableThreshold)}function a(A){window.clearTimeout(e);window.clearTimeout(n);window.clearInterval(j);if(v.state===Guacamole.Tunnel.State.CLOSED){return}if(A.code!==Guacamole.Status.Code.SUCCESS&&v.onerror){if(v.state===Guacamole.Tunnel.State.CONNECTING||A.code!==Guacamole.Status.Code.RESOURCE_NOT_FOUND){v.onerror(A)}}t=false;v.setState(Guacamole.Tunnel.State.CLOSED)}this.sendMessage=function(){if(!v.isConnected()){return}if(arguments.length===0){return}function B(E){var D=new String(E);return D.length+"."+D}var C=B(arguments[0]);for(var A=1;A<arguments.length;A++){C+=","+B(arguments[A])}C+=";";h+=C;if(!t){s()}};function s(){if(!v.isConnected()){return}if(h.length>0){t=true;var A=new XMLHttpRequest();A.open("POST",o+v.uuid);A.withCredentials=c;m(A,f);A.setRequestHeader("Content-type","application/octet-stream");A.onreadystatechange=function(){if(A.readyState===4){b();if(A.status!==200){r(A)}else{s()}}};A.send(h);h=""}else{t=false}}function r(C){var B=parseInt(C.getResponseHeader("Guacamole-Status-Code"));if(B){var A=C.getResponseHeader("Guacamole-Error-Message");a(new Guacamole.Status(B,A))}else{if(C.status){a(new Guacamole.Status(Guacamole.Status.Code.fromHTTPCode(C.status),C.statusText))}else{a(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_NOT_FOUND))}}}function x(D){var A=null;var F=null;var C=0;var B=-1;var G=0;var E=new Array();function H(){if(!v.isConnected()){if(A!==null){clearInterval(A)}return}if(D.readyState<2){return}var I;try{I=D.status}catch(P){I=200}if(!F&&I===200){F=u()}if(D.readyState===3||D.readyState===4){b();if(w===k){if(D.readyState===3&&!A){A=setInterval(H,30)}else{if(D.readyState===4&&A){clearInterval(A)}}}if(D.status===0){v.disconnect();return}else{if(D.status!==200){r(D);return}}var O;try{O=D.responseText}catch(P){return}while(B<O.length){if(B>=G){var K=O.substring(G,B);var J=O.substring(B,B+1);E.push(K);if(J===";"){var N=E.shift();if(v.oninstruction){v.oninstruction(N,E)}E.length=0}G=B+1}var L=O.indexOf(".",G);if(L!==-1){var M=parseInt(O.substring(B+1,L));if(M===0){if(A){clearInterval(A)}D.onreadystatechange=null;D.abort();if(F){x(F)}break}G=L+1;B=G+M}else{G=O.length;break}}}}if(w===k){D.onreadystatechange=function(){if(D.readyState===3){C++;if(C>=2){w=q;D.onreadystatechange=H}}H()}}else{D.onreadystatechange=H}H()}var g=0;function u(){var A=new XMLHttpRequest();A.open("GET",z+v.uuid+":"+(g++));A.withCredentials=c;m(A,f);A.send(null);return A}this.connect=function(A){b();v.setState(Guacamole.Tunnel.State.CONNECTING);var B=new XMLHttpRequest();B.onreadystatechange=function(){if(B.readyState!==4){return}if(B.status!==200){r(B);return}b();v.setUUID(B.responseText);v.setState(Guacamole.Tunnel.State.OPEN);j=setInterval(function C(){v.sendMessage("nop")},d);x(u())};B.open("POST",l,true);B.withCredentials=c;m(B,f);B.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");B.send(A)};this.disconnect=function(){a(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}};Guacamole.HTTPTunnel.prototype=new Guacamole.Tunnel();Guacamole.WebSocketTunnel=function(d){var g=this;var i=null;var a=null;var f=null;var c=null;var b={"http:":"ws:","https:":"wss:"};var h=500;if(d.substring(0,3)!=="ws:"&&d.substring(0,4)!=="wss:"){var k=b[window.location.protocol];if(d.substring(0,1)==="/"){d=k+"//"+window.location.host+d}else{var e=window.location.pathname.lastIndexOf("/");var m=window.location.pathname.substring(0,e+1);d=k+"//"+window.location.host+m+d}}function l(){window.clearTimeout(a);window.clearTimeout(f);if(g.state===Guacamole.Tunnel.State.UNSTABLE){g.setState(Guacamole.Tunnel.State.OPEN)}a=window.setTimeout(function(){j(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},g.receiveTimeout);f=window.setTimeout(function(){g.setState(Guacamole.Tunnel.State.UNSTABLE)},g.unstableThreshold)}function j(n){window.clearTimeout(a);window.clearTimeout(f);window.clearInterval(c);if(g.state===Guacamole.Tunnel.State.CLOSED){return}if(n.code!==Guacamole.Status.Code.SUCCESS&&g.onerror){g.onerror(n)}g.setState(Guacamole.Tunnel.State.CLOSED);i.close()}this.sendMessage=function(q){if(!g.isConnected()){return}if(arguments.length===0){return}function o(s){var r=new String(s);return r.length+"."+r}var p=o(arguments[0]);for(var n=1;n<arguments.length;n++){p+=","+o(arguments[n])}p+=";";i.send(p)};this.connect=function(n){l();g.setState(Guacamole.Tunnel.State.CONNECTING);i=new WebSocket(d+"?"+n,"guacamole");i.onopen=function(p){l();c=setInterval(function o(){g.sendMessage(Guacamole.Tunnel.INTERNAL_DATA_OPCODE,"ping",new Date().getTime())},h)};i.onclose=function(o){if(o.reason){j(new Guacamole.Status(parseInt(o.reason),o.reason))}else{if(o.code){j(new Guacamole.Status(Guacamole.Status.Code.fromWebSocketCode(o.code)))}else{j(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_NOT_FOUND))}}};i.onmessage=function(q){l();var x=q.data;var v=0;var u;var p=[];do{var w=x.indexOf(".",v);if(w!==-1){var r=parseInt(x.substring(u+1,w));v=w+1;u=v+r}else{j(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,"Incomplete instruction."))}var t=x.substring(v,u);var o=x.substring(u,u+1);p.push(t);if(o===";"){var s=p.shift();if(g.uuid===null){if(s===Guacamole.Tunnel.INTERNAL_DATA_OPCODE){g.setUUID(p[0])}g.setState(Guacamole.Tunnel.State.OPEN)}if(s!==Guacamole.Tunnel.INTERNAL_DATA_OPCODE&&g.oninstruction){g.oninstruction(s,p)}p.length=0}v=u+1}while(v<x.length)}};this.disconnect=function(){j(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}};Guacamole.WebSocketTunnel.prototype=new Guacamole.Tunnel();Guacamole.ChainedTunnel=function(e){var c=this;var a;var g=[];var f=null;for(var d=0;d<arguments.length;d++){g.push(arguments[d])}function b(j){c.disconnect=j.disconnect;c.sendMessage=j.sendMessage;var i=function i(k){if(k&&k.code===Guacamole.Status.Code.UPSTREAM_TIMEOUT){g=[];return null}var l=g.shift();if(l){j.onerror=null;j.oninstruction=null;j.onstatechange=null;b(l)}return l};function h(){j.onstatechange=c.onstatechange;j.oninstruction=c.oninstruction;j.onerror=c.onerror;j.onuuid=c.onuuid;if(j.uuid){c.setUUID(j.uuid)}f=j}j.onstatechange=function(k){switch(k){case Guacamole.Tunnel.State.OPEN:h();if(c.onstatechange){c.onstatechange(k)}break;case Guacamole.Tunnel.State.CLOSED:if(!i()&&c.onstatechange){c.onstatechange(k)}break}};j.oninstruction=function(l,k){h();if(c.oninstruction){c.oninstruction(l,k)}};j.onerror=function(k){if(!i(k)&&c.onerror){c.onerror(k)}};j.connect(a)}this.connect=function(i){a=i;var h=f?f:g.shift();if(h){b(h)}else{if(c.onerror){c.onerror(Guacamole.Status.Code.SERVER_ERROR,"No tunnels to try.")}}}};Guacamole.ChainedTunnel.prototype=new Guacamole.Tunnel();Guacamole.StaticHTTPTunnel=function StaticHTTPTunnel(a,c,h){var e=this;var g=null;var b=h||{};function i(l,m){for(var k in m){l.setRequestHeader(k,m[k])}}this.sendMessage=function d(k){};this.connect=function j(l){e.disconnect();e.setState(Guacamole.Tunnel.State.CONNECTING);g=new XMLHttpRequest();g.open("GET",a);g.withCredentials=!!c;i(g,b);g.responseType="text";g.send(null);var n=0;var p=new Guacamole.Parser();p.oninstruction=function o(r,q){if(e.oninstruction){e.oninstruction(r,q)}};g.onreadystatechange=function m(){if(g.readyState===3||g.readyState===4){e.setState(Guacamole.Tunnel.State.OPEN);var q=g.responseText;var r=q.length;if(n<r){p.receive(q.substring(n));n=r}}if(g.readyState===4){e.disconnect()}};g.onerror=function k(){if(e.onerror){e.onerror(new Guacamole.Status(Guacamole.Status.Code.fromHTTPCode(g.status),g.statusText))}e.disconnect()}};this.disconnect=function f(){if(g){g.abort();g=null}e.setState(Guacamole.Tunnel.State.CLOSED)}};Guacamole.StaticHTTPTunnel.prototype=new Guacamole.Tunnel();var Guacamole=Guacamole||{};Guacamole.API_VERSION="1.3.0";var Guacamole=Guacamole||{};Guacamole.VideoPlayer=function VideoPlayer(){this.sync=function a(){}};Guacamole.VideoPlayer.isSupportedType=function isSupportedType(a){return false};Guacamole.VideoPlayer.getSupportedTypes=function getSupportedTypes(){return[]};Guacamole.VideoPlayer.getInstance=function getInstance(c,b,a){return null};