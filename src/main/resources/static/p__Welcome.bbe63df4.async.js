(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{RyC9:function(D,C,e){"use strict";e.r(C);var Ke=e("2qtc"),$=e("kLXV"),Te=e("cWXX"),z=e("/ezw"),Ae=e("Mwp2"),S=e("VXEj"),Fe=e("IzEo"),K=e("bx4M"),He=e("14J3"),Z=e("BMrR"),Le=e("jCWc"),Y=e("kPKH"),t=e("nKUr"),Pe=e("+L6B"),B=e("2/Rp"),Ue=e("lUTK"),V=e("BvKs"),k=e("o0o1"),i=e.n(k),b=e("HaE+"),d=e("ODXe"),m=e("q1tI"),y=e("9kvl"),q=e("xvlK"),E=e("nhC9"),_=e("FJDo"),ee=e("F/zT"),w=e("Qurx"),T=e("rmhi"),te=e("yj/a"),ae=e("Ur6u"),I=e.n(ae),se={ssh:[{name:"hostname",required:!0,type:"text",message:"\u4E3B\u673AIP"},{name:"port",required:!0,type:"number",message:"\u4E3B\u673A\u7AEF\u53E3",defaultValue:22},{name:"username",required:!0,type:"text",message:"\u7528\u6237\u540D"},{name:"password",required:!0,type:"text",message:"\u5BC6\u7801"}],telnet:[{name:"hostname",required:!0,type:"text",message:"\u4E3B\u673AIP"},{name:"port",required:!0,type:"number",message:"\u4E3B\u673A\u7AEF\u53E3",defaultValue:23},{name:"username",required:!0,type:"text",message:"\u7528\u6237\u540D"},{name:"password",required:!0,type:"text",message:"\u5BC6\u7801"}],rdp:[{name:"hostname",required:!0,type:"text",message:"\u4E3B\u673AIP"},{name:"port",required:!0,type:"number",message:"\u4E3B\u673A\u7AEF\u53E3",defaultValue:3389},{name:"username",required:!0,type:"text",message:"\u7528\u6237\u540D"},{name:"password",required:!0,type:"text",message:"\u5BC6\u7801"},{name:"ignoreCert",required:!1,type:"switch",message:"\u5FFD\u7565\u8BC1\u4E66",defaultValue:!0}],vnc:[{name:"hostname",required:!0,type:"text",message:"\u4E3B\u673AIP"},{name:"port",required:!0,type:"number",message:"\u4E3B\u673A\u7AEF\u53E3",defaultValue:5900},{name:"username",required:!1,type:"text",message:"\u7528\u6237\u540D"},{name:"password",required:!0,type:"text",message:"\u5BC6\u7801"}]},ne=e("1OyB"),re=e("Ji7U"),oe=e("LK+K"),le=e("Texg"),ue=function(h){Object(re.a)(c,h);var u=Object(oe.a)(c);function c(){var n;return Object(ne.a)(this,c),n=u.call(this,"welcomeDB"),n.hosts=void 0,n.categorys=void 0,n.version(2).stores({categorys:"++id,name",hosts:"++id,name,protocol,hostname,port,username,possword,thumbnail,ignoreCert,category"}),n}return c}(le.default),ce=new ue,v=ce,A=e("XdrM"),ie=e("VTBJ"),de=e("qcaT"),p=e.n(de);function me(h){var u=document.getElementById("display"),c=Object(ie.a)({},h);delete c.thumbnail;var n=new p.a.Client(new p.a.HTTPTunnel("tunnel",!1,c));u==null||u.childNodes.forEach(function(r){return u==null?void 0:u.removeChild(r)}),u.appendChild(n.getDisplay().getElement()),n.onerror=function(r){console.error("Guacamole client error is ...",r),n.disconnect()},n.connect(),window.onunload=function(){n.disconnect()};var j=new p.a.Mouse(n.getDisplay().getElement());j.onmousedown=j.onmouseup=j.onmousemove=function(r){n.sendMouseState(r)};var O=new p.a.Keyboard(document);return O.onkeydown=function(r){n.sendKeyEvent(1,r)},O.onkeyup=function(r){n.sendKeyEvent(0,r)},n.onclipboard=function(r,M){console.log("onclipboard ...",r,M),r.onblob=function(f){var x=atob(f);console.log("data blob ...",x),navigator.clipboard.writeText(x).catch(function(){console.error("clipboard write error ...")})}},n}var We=C.default=function(){var h=Object(y.f)(),u=Object(m.useState)(!1),c=Object(d.a)(u,2),n=c[0],j=c[1],O=Object(m.useState)(!1),r=Object(d.a)(O,2),M=r[0],f=r[1],x=Object(m.useState)(!1),F=Object(d.a)(x,2),ve=F[0],H=F[1],je=Object(m.useState)({}),L=Object(d.a)(je,2),P=L[0],ge=L[1],he=Object(m.useState)("all"),U=Object(d.a)(he,2),W=U[0],fe=U[1],be=Object(m.useState)(["all"]),J=Object(d.a)(be,2),ye=J[0],X=J[1],pe=Object(m.useState)([]),N=Object(d.a)(pe,2),Oe=N[0],xe=N[1],Ce=Object(m.useState)({}),R=Object(d.a)(Ce,2),Se=R[0],Be=R[1],G=Object(A.useLiveQuery)(Object(b.a)(i.a.mark(function a(){var s;return i.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,v.categorys.toArray();case 2:return s=l.sent,console.log("datas ...",s.unshift({name:"\u5168\u90E8\u4E3B\u673A",id:"all"})),l.abrupt("return",s);case 5:case"end":return l.stop()}},a)}))),Ve=Object(A.useLiveQuery)(Object(b.a)(i.a.mark(function a(){var s;return i.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,v.hosts.toArray();case 2:return s=l.sent,console.log("datas ...",s.unshift({})),l.abrupt("return",s);case 5:case"end":return l.stop()}},a)}))),Ee=function(s){console.log("connect host is ...",s),ge(s),H(!0),setTimeout(function(){Be(me(s))},1e3)};function we(){W!=="all"&&(v.categorys.delete(W),X(["all"]))}var Ie=function(){var s=document.querySelector("#display canvas"),o=s.toDataURL("image/jpeg");o.split(",")[1]&&v.hosts.update(P.id,{thumbnail:o})},Q=function(){Ie(),H(!1),Se.disconnect()},Me=G?G.map(function(a){return Object(t.jsx)(V.a.Item,{onClick:function(){fe(a.id)},children:a.name},a.id)}):null,De=Oe.map(function(a){return a.type==="number"?Object(t.jsx)(_.a,{label:a.message,name:a.name,min:1,max:65536,initialValue:a.defaultValue,fieldProps:{precision:0},rules:[{required:a.required,message:a.message}]},a.name):a.type==="switch"?Object(t.jsx)(ee.a,{name:a.name,label:a.message,initialValue:a.defaultValue},a.name):Object(t.jsx)(w.a,{rules:[{required:a.required,message:Object(t.jsx)(y.a,{id:"pages.welcome."+a.name,defaultMessage:a.message})}],label:a.message,name:a.name},a.name)});return Object(t.jsxs)(E.a,{split:"vertical",children:[Object(t.jsx)(E.a,{title:"\u5206\u7C7B\u5217\u8868",colSpan:"30%",children:Object(t.jsx)(Z.a,{children:Object(t.jsxs)(Y.a,{span:24,children:[Object(t.jsxs)("div",{className:"text-right my-8",children:[Object(t.jsx)(B.a,{type:"primary",onClick:function(){f(!0)},children:"\u65B0\u589E\u5206\u7C7B"}),Object(t.jsx)(B.a,{danger:!0,className:"ml-8",onClick:we,children:"\u9009\u4E2D\u5220\u9664"})]}),Object(t.jsx)(V.a,{mode:"inline",selectedKeys:ye,onSelect:function(s){var o=s.selectedKeys;X(o)},children:Object(t.jsx)(V.a.ItemGroup,{title:"\u5168\u90E8\u5206\u7C7B",children:Me},"allC")})]})})}),Object(t.jsx)(E.a,{title:"\u4E3B\u673A\u5217\u8868",headerBordered:!0,children:Object(t.jsx)("div",{style:{height:360},children:Object(t.jsx)("div",{className:I.a.cardList,children:Object(t.jsx)(S.b,{rowKey:"id",grid:{gutter:16,xs:1,sm:2,md:3,lg:3,xl:4,xxl:4},dataSource:Ve,renderItem:function(s){return s&&s.id?Object(t.jsx)(S.b.Item,{children:Object(t.jsx)(K.a,{hoverable:!0,className:I.a.card,cover:Object(t.jsx)("img",{alt:"image",src:s.thumbnail}),actions:[Object(t.jsx)("a",{onClick:function(){Ee(s)},children:"\u8FDE\u63A5"},"option1"),Object(t.jsx)("a",{onClick:function(){v.hosts.delete(s.id)},children:"\u5220\u9664"},"option2")],children:Object(t.jsx)(K.a.Meta,{title:Object(t.jsx)("a",{children:s.name})})})},s.id):Object(t.jsx)(S.b.Item,{children:Object(t.jsxs)(B.a,{type:"dashed",className:I.a.newButton,onClick:function(){j(!0)},children:[Object(t.jsx)(q.a,{})," \u65B0\u589E\u4E3B\u673A"]})})}})})})}),Object(t.jsxs)(T.a,{modalProps:{destroyOnClose:!0},title:h.formatMessage({id:"pages.welcome.createForm.newRule",defaultMessage:"\u65B0\u589E\u4E3B\u673A"}),width:"400px",visible:n,onVisibleChange:j,onValuesChange:function(s){console.log("changeValues ...",s),s.protocol&&xe(se[s.protocol])},onFinish:function(){var a=Object(b.a)(i.a.mark(function s(o){return i.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:console.log("value is ...",o),v.hosts.add(o),j(!1);case 3:case"end":return g.stop()}},s)}));return function(s){return a.apply(this,arguments)}}(),children:[Object(t.jsx)(w.a,{rules:[{required:!0,message:Object(t.jsx)(y.a,{id:"pages.welcome.name",defaultMessage:"\u4E3B\u673A\u540D\u79F0"})}],name:"name",label:"\u4E3B\u673A\u540D\u79F0"}),Object(t.jsx)(te.a,{name:"protocol",label:"\u8FDE\u63A5\u534F\u8BAE",valueEnum:{ssh:"ssh",rdp:"rdp",vnc:"vnc",telnet:"telnet"},rules:[{required:!0,message:"\u8FDE\u63A5\u534F\u8BAE"}]}),De]}),Object(t.jsx)(T.a,{modalProps:{destroyOnClose:!0},title:h.formatMessage({id:"pages.welcome.createForm.newCategory",defaultMessage:"\u65B0\u589E\u5206\u7C7B"}),width:"400px",visible:M,onVisibleChange:f,onValuesChange:function(s){console.log("changeValues ...",s)},onFinish:function(){var a=Object(b.a)(i.a.mark(function s(o){return i.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:console.log("value is ...",o),v.categorys.add(o),f(!1);case 3:case"end":return g.stop()}},s)}));return function(s){return a.apply(this,arguments)}}(),children:Object(t.jsx)(w.a,{rules:[{required:!0,message:Object(t.jsx)(y.a,{id:"pages.welcome.name",defaultMessage:"\u4E3B\u673A\u5206\u7C7B"})}],name:"name",label:"\u4E3B\u673A\u5206\u7C7B"})}),Object(t.jsx)($.a,{visible:ve,title:P.name,onOk:Q,onCancel:Q,footer:null,maskClosable:!1,width:"1100px",destroyOnClose:!0,centered:!0,children:Object(t.jsx)("div",{id:"display",children:Object(t.jsx)(z.a,{})})})]})}},Ur6u:function(D,C,e){D.exports={pre:"pre___3fTUI",cardList:"cardList___1D5Sj",card:"card___1e62Z",item:"item___2XZk2",extraImg:"extraImg___2FtkO",newButton:"newButton___301LS",cardAvatar:"cardAvatar___2IJV5",cardDescription:"cardDescription___Q7bUp",pageHeaderContent:"pageHeaderContent___2wUxY",contentLink:"contentLink___1Wt6b"}}}]);
